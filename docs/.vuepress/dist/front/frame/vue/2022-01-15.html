<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/n_logo.png"><link rel="manifest" href="/manifest.webmanifest.json"><meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="referrer" content="no-referrer"><meta data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><title>组合式API最佳实践 | Web技术学苑</title><meta name="description" content="专注前端技术，分享web技术">
    <link rel="modulepreload" href="/assets/app.b0cbb33e.js"><link rel="modulepreload" href="/assets/2022-01-15.html.be8581fc.js"><link rel="modulepreload" href="/assets/2022-01-15.html.d7e47800.js"><link rel="prefetch" href="/assets/index.html.b0267837.js"><link rel="prefetch" href="/assets/config.html.11061a56.js"><link rel="prefetch" href="/assets/index.html.48af1cdf.js"><link rel="prefetch" href="/assets/2022-05-08.html.1003107c.js"><link rel="prefetch" href="/assets/2022-07-22.html.c8f4dadb.js"><link rel="prefetch" href="/assets/index.html.56394ab8.js"><link rel="prefetch" href="/assets/2022-01-07.html.acef6471.js"><link rel="prefetch" href="/assets/2022-01-30.html.040b1196.js"><link rel="prefetch" href="/assets/2022-02-15.html.f38b6d77.js"><link rel="prefetch" href="/assets/2022-03-21.html.844a393d.js"><link rel="prefetch" href="/assets/2022-03-29.html.e8a1a3c6.js"><link rel="prefetch" href="/assets/2022-04-10.html.b4441b34.js"><link rel="prefetch" href="/assets/2022-04-13.html.277a9601.js"><link rel="prefetch" href="/assets/2022-04-28.html.1d05a0ae.js"><link rel="prefetch" href="/assets/2022-05-01.html.5379acad.js"><link rel="prefetch" href="/assets/2022-05-02.html.15f49d31.js"><link rel="prefetch" href="/assets/2022-05-10.html.89c02d16.js"><link rel="prefetch" href="/assets/2022-05-12.html.e0cd8ba0.js"><link rel="prefetch" href="/assets/2022-05-25.html.b1c99843.js"><link rel="prefetch" href="/assets/2022-06-15.html.71223634.js"><link rel="prefetch" href="/assets/2022-06-27.html.d3acaf23.js"><link rel="prefetch" href="/assets/2022-07-12.html.691877e9.js"><link rel="prefetch" href="/assets/2022-07-14.html.73b946c9.js"><link rel="prefetch" href="/assets/Advance.html.0d332483.js"><link rel="prefetch" href="/assets/index.html.5bb90c9b.js"><link rel="prefetch" href="/assets/2022-04-17.html.8df2755a.js"><link rel="prefetch" href="/assets/2022-05-03.html.7b1fe926.js"><link rel="prefetch" href="/assets/2022-05-17.html.4824b234.js"><link rel="prefetch" href="/assets/2022-05-27.html.d17f420d.js"><link rel="prefetch" href="/assets/2022-05-29.html.fdfee9c7.js"><link rel="prefetch" href="/assets/index.html.eb03efab.js"><link rel="prefetch" href="/assets/2022-01-11.html.d3379b31.js"><link rel="prefetch" href="/assets/index.html.7ed74cb4.js"><link rel="prefetch" href="/assets/2022-03-07.html.69a705fd.js"><link rel="prefetch" href="/assets/index.html.fb3c0761.js"><link rel="prefetch" href="/assets/2022-06-03.html.3597757e.js"><link rel="prefetch" href="/assets/2022-06-05.html.0cbb117d.js"><link rel="prefetch" href="/assets/2022-06-07.html.423f7dfb.js"><link rel="prefetch" href="/assets/2022-06-10.html.f791a2f7.js"><link rel="prefetch" href="/assets/2022-06-14.html.c3b8d4ad.js"><link rel="prefetch" href="/assets/2022-06-15.html.b78bae04.js"><link rel="prefetch" href="/assets/2022-06-21.html.b65dfa8b.js"><link rel="prefetch" href="/assets/2022-06-24.html.42456bbb.js"><link rel="prefetch" href="/assets/2022-06-29.html.58b78e02.js"><link rel="prefetch" href="/assets/2022-07-03.html.251d2947.js"><link rel="prefetch" href="/assets/2022-07-05.html.5f8d31e1.js"><link rel="prefetch" href="/assets/2022-07-06.html.bb1407ba.js"><link rel="prefetch" href="/assets/2022-07-10.html.61003676.js"><link rel="prefetch" href="/assets/index.html.2b1ae216.js"><link rel="prefetch" href="/assets/index.html.7b6ad27f.js"><link rel="prefetch" href="/assets/2022-05-20.html.46e85dda.js"><link rel="prefetch" href="/assets/2022-05-23.html.d0c66290.js"><link rel="prefetch" href="/assets/index.html.a2a904fc.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.c213e671.js"><link rel="prefetch" href="/assets/config.html.db5a64ea.js"><link rel="prefetch" href="/assets/index.html.ad60b8ec.js"><link rel="prefetch" href="/assets/2022-05-08.html.ca4548e3.js"><link rel="prefetch" href="/assets/2022-07-22.html.e4657784.js"><link rel="prefetch" href="/assets/index.html.f95a4330.js"><link rel="prefetch" href="/assets/2022-01-07.html.ec9046db.js"><link rel="prefetch" href="/assets/2022-01-30.html.3bd4161b.js"><link rel="prefetch" href="/assets/2022-02-15.html.b7ce154d.js"><link rel="prefetch" href="/assets/2022-03-21.html.083887cd.js"><link rel="prefetch" href="/assets/2022-03-29.html.97bfc3ef.js"><link rel="prefetch" href="/assets/2022-04-10.html.623bf432.js"><link rel="prefetch" href="/assets/2022-04-13.html.944be36a.js"><link rel="prefetch" href="/assets/2022-04-28.html.3d8897f5.js"><link rel="prefetch" href="/assets/2022-05-01.html.ccc5f0db.js"><link rel="prefetch" href="/assets/2022-05-02.html.8787f795.js"><link rel="prefetch" href="/assets/2022-05-10.html.02f9512b.js"><link rel="prefetch" href="/assets/2022-05-12.html.f700f48a.js"><link rel="prefetch" href="/assets/2022-05-25.html.c5bead6f.js"><link rel="prefetch" href="/assets/2022-06-15.html.5e16ef6e.js"><link rel="prefetch" href="/assets/2022-06-27.html.22fdfb88.js"><link rel="prefetch" href="/assets/2022-07-12.html.121cdb6a.js"><link rel="prefetch" href="/assets/2022-07-14.html.49271879.js"><link rel="prefetch" href="/assets/Advance.html.472c05e6.js"><link rel="prefetch" href="/assets/index.html.e1c0b3fc.js"><link rel="prefetch" href="/assets/2022-04-17.html.a7f51907.js"><link rel="prefetch" href="/assets/2022-05-03.html.76188078.js"><link rel="prefetch" href="/assets/2022-05-17.html.9e454b38.js"><link rel="prefetch" href="/assets/2022-05-27.html.abb83d4e.js"><link rel="prefetch" href="/assets/2022-05-29.html.b5ccb340.js"><link rel="prefetch" href="/assets/index.html.65a11c00.js"><link rel="prefetch" href="/assets/2022-01-11.html.5f4a1ce1.js"><link rel="prefetch" href="/assets/index.html.9cad61c4.js"><link rel="prefetch" href="/assets/2022-03-07.html.0f0be582.js"><link rel="prefetch" href="/assets/index.html.b7e26cb5.js"><link rel="prefetch" href="/assets/2022-06-03.html.563ce6f7.js"><link rel="prefetch" href="/assets/2022-06-05.html.7fde895a.js"><link rel="prefetch" href="/assets/2022-06-07.html.b176dc0c.js"><link rel="prefetch" href="/assets/2022-06-10.html.2f717b4d.js"><link rel="prefetch" href="/assets/2022-06-14.html.f0f4619f.js"><link rel="prefetch" href="/assets/2022-06-15.html.4611dc7b.js"><link rel="prefetch" href="/assets/2022-06-21.html.565fa3bc.js"><link rel="prefetch" href="/assets/2022-06-24.html.d401624f.js"><link rel="prefetch" href="/assets/2022-06-29.html.355be249.js"><link rel="prefetch" href="/assets/2022-07-03.html.92b3bf59.js"><link rel="prefetch" href="/assets/2022-07-05.html.e8a9f266.js"><link rel="prefetch" href="/assets/2022-07-06.html.fbfb78ac.js"><link rel="prefetch" href="/assets/2022-07-10.html.2623a0ae.js"><link rel="prefetch" href="/assets/index.html.f34ba208.js"><link rel="prefetch" href="/assets/index.html.d42a85f5.js"><link rel="prefetch" href="/assets/2022-05-20.html.23231621.js"><link rel="prefetch" href="/assets/2022-05-23.html.53484ca2.js"><link rel="prefetch" href="/assets/index.html.699a99c1.js"><link rel="prefetch" href="/assets/404.html.8f5c59c1.js"><link rel="prefetch" href="/assets/404.6a7aaf88.js"><link rel="prefetch" href="/assets/Layout.b31671d9.js"><link rel="prefetch" href="/assets/ActionFied.baa33806.js"><link rel="prefetch" href="/assets/index.0e8935cb.js">
    <link rel="stylesheet" href="/assets/style.8a8796b4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Web技术学苑</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/front/frame/vue/" class="router-link-active" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/front/frame/react/" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/front/leetcode/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/ts/" class="" aria-label="TS"><!--[--><!--]--> TS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/webpack/" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="社交"><span class="title">社交</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="社交"><span class="title">社交</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/4142615542920680" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://segmentfault.com/u/maicfir" rel="noopener noreferrer" target="_blank" aria-label="segmentfault"><!--[--><!--]--> segmentfault <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/maicFir/lessonNote" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maicFir/maicFir.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/front/frame/vue/" class="router-link-active" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/front/frame/react/" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/front/leetcode/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/ts/" class="" aria-label="TS"><!--[--><!--]--> TS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/webpack/" class="" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="社交"><span class="title">社交</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="社交"><span class="title">社交</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/4142615542920680" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://segmentfault.com/u/maicfir" rel="noopener noreferrer" target="_blank" aria-label="segmentfault"><!--[--><!--]--> segmentfault <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/maicFir/lessonNote" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maicFir/maicFir.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="组合式API最佳实践"><!--[--><!--]--> 组合式API最佳实践 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#注册页面" class="router-link-active router-link-exact-active sidebar-item" aria-label="注册页面"><!--[--><!--]--> 注册页面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#信息登记" class="router-link-active router-link-exact-active sidebar-item" aria-label="信息登记"><!--[--><!--]--> 信息登记 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#等待审核" class="router-link-active router-link-exact-active sidebar-item" aria-label="等待审核"><!--[--><!--]--> 等待审核 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#看下未升级之前的代码-vue2-版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="看下未升级之前的代码（vue2）版本"><!--[--><!--]--> 看下未升级之前的代码（vue2）版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#升级后代码-组合式-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级后代码（组合式 API）"><!--[--><!--]--> 升级后代码（组合式 API） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="组合式API最佳实践"><!--[--><!--]--> 组合式API最佳实践 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#注册页面" class="router-link-active router-link-exact-active sidebar-item" aria-label="注册页面"><!--[--><!--]--> 注册页面 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#信息登记" class="router-link-active router-link-exact-active sidebar-item" aria-label="信息登记"><!--[--><!--]--> 信息登记 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#等待审核" class="router-link-active router-link-exact-active sidebar-item" aria-label="等待审核"><!--[--><!--]--> 等待审核 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#看下未升级之前的代码-vue2-版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="看下未升级之前的代码（vue2）版本"><!--[--><!--]--> 看下未升级之前的代码（vue2）版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#升级后代码-组合式-api" class="router-link-active router-link-exact-active sidebar-item" aria-label="升级后代码（组合式 API）"><!--[--><!--]--> 升级后代码（组合式 API） <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/frame/vue/2022-01-15.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/front/frame/vue/2022-05-20.html" class="sidebar-item" aria-label="在业务代码中常用到的Vue数据通信方式"><!--[--><!--]--> 在业务代码中常用到的Vue数据通信方式 <!--[--><!--]--></a><!----></li><li><a href="/front/frame/vue/2022-05-23.html" class="sidebar-item" aria-label="Vue数据双向绑定实现原理"><!--[--><!--]--> Vue数据双向绑定实现原理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p><code>vue组合式</code>是<code>vue2</code>项目过渡<code>vue3</code>的一种友好方案，在历史项目逐步迁移到<code>vue3</code>中，有项目历史包袱原因，一下子升级带来的问题可能比较多，<code>composition-api</code>天然兼容<code>vue2</code>,在<code>vue2</code>中使用<code>组合式API</code>让你提前感受<code>vue3</code>的各种姿势，<code>vue3</code>已经出来 3 年了，都<code>2022</code>了，<code>vue</code>祖师爷赏饭吃，相信你跟笔者一样早已跃跃欲试。</p><p><img src="https://img.soogif.com/IeWk1WWjT3XDOMWtSB7kgeoWbvaBIBGe.gif?scope=mdnice" alt=""></p><p>前段时间，笔者项目已经完成升级<code>ts</code>、<code>组合式api</code>,毕竟去年第 4 季度首要<code>KPI</code>便是升级项目业务引入<code>ts</code>和<code>组合式API</code>。在一边搬砖迭代业务，一边升级项目技术栈的挑战，过程虽曲折，好在组内有大佬及时解围，常常遇到奇葩问题，算是少走弯路。本篇不做<code>组合式API语法</code>过渡解读，因最近一个页面需求优化，以最简单的注册业务为例，在<code>vue2</code>与<code>组合式API</code>的选择中，希望给你的项目升级的过程中带来一点点帮助和思考。</p><p>正文开始...</p><h3 id="注册页面" tabindex="-1"><a class="header-anchor" href="#注册页面" aria-hidden="true">#</a> 注册页面</h3><p>这是一个非常普通的一个注册流程，可以看下具体页面，<code>第一步账号注册</code><img src="https://files.mdnice.com/user/24614/3c066083-baab-416d-8e67-7b14fed9e268.jpg" alt=""></p><h3 id="信息登记" tabindex="-1"><a class="header-anchor" href="#信息登记" aria-hidden="true">#</a> 信息登记</h3><p>这是完成注册后，需要登记信息<code>第二步信息登记</code><img src="https://files.mdnice.com/user/24614/bf23769f-8dba-4504-a58e-13f30b82ced3.jpg" alt=""></p><h3 id="等待审核" tabindex="-1"><a class="header-anchor" href="#等待审核" aria-hidden="true">#</a> 等待审核</h3><p>在第二步完成信息登记成功后，便等待管理员审核便可成功登陆控制台 <img src="https://files.mdnice.com/user/24614/572d56c3-78af-420d-af0c-0dbcdf2a536a.jpg" alt=""></p><h3 id="看下未升级之前的代码-vue2-版本" tabindex="-1"><a class="header-anchor" href="#看下未升级之前的代码-vue2-版本" aria-hidden="true">#</a> 看下未升级之前的代码（vue2）版本</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Index.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>a<span class="token operator">-</span>base<span class="token operator">-</span>page<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">-</span>card <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page-content-card&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">-</span>steps <span class="token operator">:</span>current<span class="token operator">=</span><span class="token string">&quot;currentStep&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i<span class="token operator">-</span>step v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;step of steps&quot;</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;step.value&quot;</span> <span class="token operator">:</span>title<span class="token operator">=</span><span class="token string">&quot;$t(step.label)&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>step<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>steps<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">-</span>divider<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>divider<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>注册<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>register v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;currentStep === 0&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-one&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;finishRegister&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>register<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>信息登记<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>info v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;currentStep === 1&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-two&quot;</span> @finish<span class="token operator">=</span><span class="token string">&quot;finishRegisterInfo&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>info<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>等待审核<span class="token operator">--</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>a<span class="token operator">-</span>moderation v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;currentStep === 2&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-three&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>moderation<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>card<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>base<span class="token operator">-</span>page<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Index.vue</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> auth <span class="token keyword">from</span> <span class="token string">&#39;@/service/auth&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BasePageLayout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">&#39;./Register&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Info <span class="token keyword">from</span> <span class="token string">&#39;./Info&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Moderation <span class="token keyword">from</span> <span class="token string">&#39;./Moderation&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ABasePageLayout</span><span class="token operator">:</span> BasePageLayout<span class="token punctuation">,</span>
    <span class="token literal-property property">ARegister</span><span class="token operator">:</span> Register<span class="token punctuation">,</span>
    <span class="token literal-property property">AInfo</span><span class="token operator">:</span> Info<span class="token punctuation">,</span>
    <span class="token literal-property property">AModeration</span><span class="token operator">:</span> Moderation<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">currentStep</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      <span class="token literal-property property">steps</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;register.steps.one&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;register.steps.two&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token string">&#39;register.steps.three&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">finishRegister</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>developerInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>developerInfo<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.message.registerd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          auth<span class="token punctuation">.</span><span class="token function">goLogin</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>currentStep <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>currentStep <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">finishRegisterInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentStep <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>step<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentStep <span class="token operator">=</span> step<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>currentStep <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上是<code>index.vue</code>,模板和逻辑是常用的<code>options</code>和<code>template</code>方式，在<code>vue2</code>中看起来似乎没毛病。</p><p>我们在继续关注第一步<code>Register.vue</code>，具体代码如下：</p><p><code>模板代码</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Register.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">-</span>alert <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;warm-prompt-alert&quot;</span> show<span class="token operator">-</span>icon closable<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;warm-prompt-tips&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.warmPrompt.title&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.warmPrompt.content&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>alert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">-</span>col span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i<span class="token operator">-</span>tabs<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 手机号注册 <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>tab<span class="token operator">-</span>pane <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.tabs.phone&#39;)&quot;</span> icon<span class="token operator">=</span><span class="token string">&quot;ios-phone-portrait&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>form
              <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm&quot;</span>
              ref<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm&quot;</span>
              <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;phoneRuleValidate&quot;</span>
              <span class="token operator">:</span>label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;140&quot;</span>
            <span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.phone.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;phone&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm.phone&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.phone.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm.password&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;rpassword&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm.rpassword&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;authCode&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>row type<span class="token operator">=</span><span class="token string">&quot;flex&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;authcode-row&quot;</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                      v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm.authCode&quot;</span>
                      <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.placeholder&#39;)&quot;</span>
                    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>i<span class="token operator">-</span>col <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;padding-left-16&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button
                      @send<span class="token operator">-</span>code<span class="token operator">=</span><span class="token string">&quot;sendCode(&#39;phone&#39;)&quot;</span>
                      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!registerPhoneForm.phone&quot;</span>
                    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerPhoneForm.agreeAndComply&quot;</span><span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.agreeAndComply&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/user-agreement&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.userAgreement&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                  与
                  <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/privacy-policy&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.privacyPolicy&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>button
                  type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
                  @click<span class="token operator">=</span><span class="token string">&quot;submitPhoneForm&quot;</span>
                  <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!registerPhoneForm.agreeAndComply&quot;</span>
                <span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.submitButtonLabel&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 邮箱注册 <span class="token operator">--</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>tab<span class="token operator">-</span>pane <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.tabs.email&#39;)&quot;</span> icon<span class="token operator">=</span><span class="token string">&quot;ios-mail&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>form
              <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm&quot;</span>
              ref<span class="token operator">=</span><span class="token string">&quot;registerEmailForm&quot;</span>
              <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;emailRuleValidate&quot;</span>
              <span class="token operator">:</span>label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;140&quot;</span>
            <span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.email.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;email&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm.email&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.email.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm.password&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;rpassword&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm.rpassword&quot;</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;authCode&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>row type<span class="token operator">=</span><span class="token string">&quot;flex&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;authcode-row&quot;</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                      v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm.authCode&quot;</span>
                      <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.placeholder&#39;)&quot;</span>
                    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>i<span class="token operator">-</span>col <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;padding-left-16&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button
                      @send<span class="token operator">-</span>code<span class="token operator">=</span><span class="token string">&quot;sendCode(&#39;email&#39;)&quot;</span>
                      <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!registerEmailForm.email&quot;</span>
                    <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;registerEmailForm.agreeAndComply&quot;</span><span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.agreeAndComply&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/user-agreement&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.userAgreement&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                  与
                  <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/privacy-policy&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.privacyPolicy&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>button
                  type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
                  @click<span class="token operator">=</span><span class="token string">&quot;submitEmailForm&quot;</span>
                  <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!registerEmailForm.agreeAndComply&quot;</span>
                <span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.submitButtonLabel&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>tab<span class="token operator">-</span>pane<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>tabs<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>js代码</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Register.vue</span>
<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token keyword">import</span> md5 <span class="token keyword">from</span> <span class="token string">&#39;blueimp-md5&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> commonRegexp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/index&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> VcodeButton<span class="token punctuation">,</span> FixedAutofillPassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> handlegetRegistVCodeProxy<span class="token punctuation">,</span> handleRegisterProxy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/service/proxy/index&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">AVcodeButton</span><span class="token operator">:</span> VcodeButton<span class="token punctuation">,</span>
    <span class="token literal-property property">AFixedAutofillPassword</span><span class="token operator">:</span> FixedAutofillPassword<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">registerPhoneForm</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">agreeAndComply</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">phoneRuleValidate</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.phone.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">MOBILE_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.phone.regCheckMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">PASSWORD_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.regCheckMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registerPhoneForm<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.notMatchMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.authCode.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">registerEmailForm</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">agreeAndComply</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">emailRuleValidate</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">email</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.email.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">EMAIL_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.email.regCheckMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">PASSWORD_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.regCheckMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registerEmailForm<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.notMatchMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">rule<span class="token punctuation">,</span> value<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.authCode.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">handleProtal</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">sendCode</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;phone&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        params<span class="token punctuation">.</span>phoneNum <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registerPhoneForm<span class="token punctuation">.</span>phone<span class="token punctuation">;</span>
        params<span class="token punctuation">.</span>countryCode <span class="token operator">=</span> <span class="token string">&#39;+86&#39;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>type <span class="token operator">===</span> <span class="token string">&#39;email&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        params<span class="token punctuation">.</span>email <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>registerEmailForm<span class="token punctuation">.</span>email<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      params<span class="token punctuation">.</span>authCodeType <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 0 注册 1验证码登陆 2 找回密码</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">handlegetRegistVCodeProxy</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;common.message.success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token keyword">async</span> <span class="token function">_doRegister</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">handleRegisterProxy</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> <span class="token string">&#39;register&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">&#39;finish&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">submitPhoneForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">registerPhoneForm</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">phone</span><span class="token operator">:</span> account<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authCode <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>registerPhoneForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
            account<span class="token punctuation">,</span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">,</span>
            authCode<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_doRegister</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">submitEmailForm</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">registerEmailForm</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">email</span><span class="token operator">:</span> account<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authCode <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>registerEmailForm<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token parameter">valid</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token punctuation">{</span>
            account<span class="token punctuation">,</span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">,</span>
            authCode<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_doRegister</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个页面代码如此冗余，我们发现有非常多重复的东西，用了两个<code>tab</code>切换两种不同方式注册，但实际上发现<code>手机注册</code>、<code>邮箱</code>注册最后调用接口都是一样的，所以冗余代码有些多，代码虽长了些，好在能改得动。</p><h3 id="升级后代码-组合式-api" tabindex="-1"><a class="header-anchor" href="#升级后代码-组合式-api" aria-hidden="true">#</a> 升级后代码（组合式 API）</h3><p>用<code>jsx</code>与<code>composition-api</code>重构了这个页面，减少了很多不必要的代码</p><p>新重构<code>Index.vue模板代码</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Index.vue</span>
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;tsx&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> SetupContext<span class="token punctuation">,</span> watch<span class="token punctuation">,</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/composition-api&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Qs <span class="token keyword">from</span> <span class="token string">&#39;qs&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> auth <span class="token keyword">from</span> <span class="token string">&#39;@/service/auth&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> BasePageLayout <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStepConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./hooks&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Register <span class="token keyword">from</span> <span class="token string">&#39;./Register.vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Info <span class="token keyword">from</span> <span class="token string">&#39;./Info.vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Moderation <span class="token keyword">from</span> <span class="token string">&#39;./Moderation.vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> AuditFail <span class="token keyword">from</span> <span class="token string">&#39;./AuditFail.vue&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">ABasePageLayout</span><span class="token operator">:</span> BasePageLayout<span class="token punctuation">,</span>
    <span class="token literal-property property">ARegister</span><span class="token operator">:</span> Register<span class="token punctuation">,</span>
    <span class="token literal-property property">AInfo</span><span class="token operator">:</span> Info<span class="token punctuation">,</span>
    <span class="token literal-property property">AModeration</span><span class="token operator">:</span> Moderation<span class="token punctuation">,</span>
    AuditFail<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> <span class="token literal-property property">ctx</span><span class="token operator">:</span> SetupContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentStep<span class="token punctuation">,</span> steps <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStepConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> root <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">;</span>
    <span class="token comment">// 完成注册</span>
    <span class="token keyword">const</span> <span class="token function-variable function">finish</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">result</span><span class="token operator">:</span> PlainObj<span class="token punctuation">,</span> <span class="token literal-property property">setType</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>setType <span class="token operator">===</span> <span class="token string">&#39;regiter&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>developerInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>developerInfo<span class="token punctuation">.</span>enabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            root<span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.message.registerd&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            auth<span class="token punctuation">.</span><span class="token function">goLogin</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            root<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/register?step=2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          root<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/register?step=1&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// const { step, status } = result;</span>
        <span class="token keyword">const</span> params <span class="token operator">=</span> Qs<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">addQueryPrefix</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        root<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/register</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token function">watch</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> root<span class="token punctuation">.</span>$route<span class="token punctuation">,</span>
      <span class="token punctuation">(</span>val<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token parameter"><span class="token keyword">void</span></span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">query</span><span class="token operator">:</span> <span class="token punctuation">{</span> step <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
        currentStep<span class="token punctuation">.</span>value <span class="token operator">=</span> step <span class="token operator">?</span> <span class="token function">Number</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> step <span class="token operator">=</span> <span class="token operator">+</span>root<span class="token punctuation">.</span>$route<span class="token punctuation">.</span>query<span class="token punctuation">.</span>step<span class="token punctuation">;</span>
      currentStep<span class="token punctuation">.</span>value <span class="token operator">=</span> step <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      currentStep<span class="token punctuation">,</span>
      steps<span class="token punctuation">,</span>
      finish<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> currentStep<span class="token punctuation">,</span> steps<span class="token punctuation">,</span> finish <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token literal-property property">CurentComponent</span><span class="token operator">:</span> any <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span><span class="token parameter">Element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token literal-property property">ret</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>key<span class="token operator">:</span> number<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">JSX</span><span class="token punctuation">.</span>Element<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token number">0</span><span class="token operator">:</span> <span class="token operator">&lt;</span>a<span class="token operator">-</span>register <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-one&quot;</span> onFinish<span class="token operator">=</span><span class="token punctuation">{</span>finish<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>register<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token number">1</span><span class="token operator">:</span> <span class="token operator">&lt;</span>a<span class="token operator">-</span>info <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-two&quot;</span> onFinish<span class="token operator">=</span><span class="token punctuation">{</span>finish<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>info<span class="token operator">&gt;</span><span class="token punctuation">,</span>
        <span class="token number">2</span><span class="token operator">:</span> <span class="token operator">&lt;</span>a<span class="token operator">-</span>moderation <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;step-three&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>moderation<span class="token operator">&gt;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> ret<span class="token punctuation">[</span>currentStep<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;register&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a<span class="token operator">-</span>base<span class="token operator">-</span>page<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>a<span class="token operator">-</span>card <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;page-content-card&quot;</span><span class="token operator">&gt;</span>
            <span class="token punctuation">{</span>currentStep <span class="token operator">===</span> <span class="token number">3</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>audit<span class="token operator">-</span>fail onFinish<span class="token operator">=</span><span class="token punctuation">{</span>finish<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>audit<span class="token operator">-</span>fail<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>steps current<span class="token operator">=</span><span class="token punctuation">{</span>currentStep<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token punctuation">{</span>steps<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">v</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>
                    <span class="token operator">&lt;</span>i<span class="token operator">-</span>step key<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>value<span class="token punctuation">}</span> title<span class="token operator">=</span><span class="token punctuation">{</span>v<span class="token punctuation">.</span>label<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>step<span class="token operator">&gt;</span>
                  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>steps<span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>currentStep<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">(</span>
                  <span class="token operator">&lt;</span>i<span class="token operator">-</span>divider style<span class="token operator">=</span><span class="token string">&quot;width:auto;min-width:80%;margin:30px 60px;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>divider<span class="token operator">&gt;</span>
                <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span>CurentComponent <span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>card<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>base<span class="token operator">-</span>page<span class="token operator">-</span>layout<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>由页面结构来看，其实与未升级前并没有发生多大变化，就是第一步注册操作、第二步信息登记，第三部等待审核。不过注意页面上还有一个状态<code>currentStep=3</code>的条件，这是一个等待审核被拒绝的页面状态。页面每个步骤的阶段显示都是通过路由的<code>currentStep</code>来做判断标识。</p><p>重构后后新注册页面<code>模板代码</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Register.vue</span>
<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">-</span>alert <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;warm-prompt-alert&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span slot<span class="token operator">=</span><span class="token string">&quot;desc&quot;</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.warmPrompt.title&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.warmPrompt.content&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:void(0)&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;color: #4754ff&quot;</span> @click<span class="token operator">=</span><span class="token string">&quot;handleLogin&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.warmPrompt.accountLogin&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>alert<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>i<span class="token operator">-</span>col span<span class="token operator">=</span><span class="token string">&quot;12&quot;</span> offset<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i<span class="token operator">-</span>form <span class="token operator">:</span>model<span class="token operator">=</span><span class="token string">&quot;formParams&quot;</span> <span class="token operator">:</span>rules<span class="token operator">=</span><span class="token string">&quot;rulesConfig&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;form&quot;</span> <span class="token operator">:</span>label<span class="token operator">-</span>width<span class="token operator">=</span><span class="token string">&quot;140&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>fixed<span class="token operator">-</span>autofill<span class="token operator">-</span>password<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.useServer.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;useServer&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>select
              style<span class="token operator">=</span><span class="token string">&quot;width: 320px&quot;</span>
              v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formParams.useServer&quot;</span>
              <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.useServer.placeholder&#39;)&quot;</span>
            <span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>option
                v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;item in useServerListOption&quot;</span>
                <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;item.value&quot;</span>
                <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">&quot;item.value&quot;</span>
                <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(item.label)&quot;</span>
              <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>option<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>select<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.account.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;account&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
              v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;formParams.account&quot;</span>
              <span class="token literal-property property">clearable</span>
              <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.account.placeholder&#39;)&quot;</span>
            <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;password&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
              type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
              clearable
              v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;formParams.password&quot;</span>
              <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.password.placeholder&#39;)&quot;</span>
            <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;rpassword&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
              type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span>
              clearable
              v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formParams.rpassword&quot;</span>
              <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.rpassword.placeholder&#39;)&quot;</span>
            <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item <span class="token operator">:</span>label<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.label&#39;)&quot;</span> prop<span class="token operator">=</span><span class="token string">&quot;authCode&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>row type<span class="token operator">=</span><span class="token string">&quot;flex&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;authcode-row&quot;</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i<span class="token operator">-</span>input
                  v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formParams.authCode&quot;</span>
                  <span class="token literal-property property">clearable</span>
                  <span class="token operator">:</span>placeholder<span class="token operator">=</span><span class="token string">&quot;$t(&#39;register.registerForm.authCode.placeholder&#39;)&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>input<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>i<span class="token operator">-</span>col <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;padding-left-16&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button
                  <span class="token operator">:</span>sendCode<span class="token operator">=</span><span class="token string">&quot;sendCode&quot;</span>
                  <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!formParams.account&quot;</span>
                <span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">-</span>vcode<span class="token operator">-</span>button<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>checkbox v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;formParams.agreeAndComply&quot;</span><span class="token operator">&gt;</span>
              <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.agreeAndComply&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/user-agreement&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.userAgreement&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
              与
              <span class="token operator">&lt;</span>a @click<span class="token operator">=</span><span class="token string">&quot;handleProtal(&#39;/privacy-policy&#39;)&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;link&quot;</span><span class="token operator">&gt;</span>
                <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;login.privacyPolicy&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>checkbox<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>i<span class="token operator">-</span>button
              style<span class="token operator">=</span><span class="token string">&quot;width: 100%&quot;</span>
              type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
              @click<span class="token operator">=</span><span class="token string">&quot;handleSubmit&quot;</span>
              <span class="token operator">:</span>disabled<span class="token operator">=</span><span class="token string">&quot;!formParams.agreeAndComply&quot;</span>
            <span class="token operator">&gt;</span>
              <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.submitButtonLabel&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">-</span>item<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>form<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>col<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">-</span>row<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们发现模板页面少了邮箱与手机号的区别，这是因为把手机号与邮箱统称为账号了，笔者认为在需求阶段应该就能考虑到，由于接口设计原因，邮箱和手机号为一个字段，但是前端表现形式不一样，譬如涉及邮箱和手机号的正则校验，因此，在需求与编码阶段，你是否会走第一种方案？还是说以后端一个字段设计为准，在视图层里，你不要那么明确的给用户两种方式选择。有更好的选择，如果设计如此，我们可以与产品设计沟通，因为只要你有理由说服了他们，那么就会增加代码的可复用度，降低冗余代码的堆积，从而减少维护成本。</p><p>重构后新注册<code>js代码</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// Register.vue</span>
<span class="token operator">&lt;</span>script lang<span class="token operator">=</span><span class="token string">&quot;tsx&quot;</span><span class="token operator">&gt;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defineComponent<span class="token punctuation">,</span> SetupContext<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/composition-api&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Form <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;view-design&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> md5 <span class="token keyword">from</span> <span class="token string">&#39;blueimp-md5&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> commonRegexp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/index&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> VcodeButton<span class="token punctuation">,</span> FixedAutofillPassword <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/components&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> useServerListOptionMinx <span class="token keyword">from</span> <span class="token string">&#39;@/mixins/useServerListOptionMinx&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> handlegetRegistVCodeProxy<span class="token punctuation">,</span> handleRegisterProxy <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/service/proxy/index&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useRegister <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./hooks&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">formParamsType</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">account</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token literal-property property">authCode</span><span class="token operator">:</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span>
  <span class="token literal-property property">useServer</span><span class="token operator">:</span> number <span class="token operator">|</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineComponent</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">AVcodeButton</span><span class="token operator">:</span> VcodeButton<span class="token punctuation">,</span>
    <span class="token literal-property property">AFixedAutofillPassword</span><span class="token operator">:</span> FixedAutofillPassword<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mixins</span><span class="token operator">:</span> <span class="token punctuation">[</span>useServerListOptionMinx<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token function">setup</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">ctx</span><span class="token operator">:</span> SetupContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> formParams<span class="token punctuation">,</span> rules <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useRegister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> refs<span class="token punctuation">,</span> emit<span class="token punctuation">,</span> root <span class="token punctuation">}</span> <span class="token operator">=</span> ctx<span class="token punctuation">;</span>
    <span class="token keyword">const</span> rulesConfig <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> rules<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">doRegister</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">params</span><span class="token operator">:</span> formParamsType</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">handleRegisterProxy</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&#39;finish&#39;</span><span class="token punctuation">,</span> res<span class="token punctuation">,</span> <span class="token string">&#39;regiter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleProtal</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">path</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> account<span class="token punctuation">,</span> password<span class="token punctuation">,</span> authCode<span class="token punctuation">,</span> useServer <span class="token punctuation">}</span> <span class="token operator">=</span> formParams<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token punctuation">(</span>refs<span class="token punctuation">.</span>form <span class="token keyword">as</span> InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> Form<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">valid</span><span class="token operator">:</span> Boolean</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">const</span> <span class="token literal-property property">params</span><span class="token operator">:</span> formParamsType <span class="token operator">=</span> <span class="token punctuation">{</span>
            account<span class="token punctuation">,</span>
            <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token function">md5</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">,</span>
            authCode<span class="token punctuation">,</span>
            useServer<span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
          <span class="token function">doRegister</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token comment">// 发送验证码</span>
    <span class="token keyword">const</span> <span class="token function-variable function">sendCode</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> account <span class="token punctuation">}</span> <span class="token operator">=</span> formParams<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        phoneNum<span class="token operator">?</span><span class="token operator">:</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span>
        email<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
        <span class="token literal-property property">authCodeType</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">authCodeType</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 0 注册 1验证码登陆 2 找回密码</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">PHONE_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        params<span class="token punctuation">.</span>phoneNum <span class="token operator">=</span> account<span class="token punctuation">;</span>
        <span class="token comment">//    params.countryCode = &#39;+86&#39;;</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">EMAIL_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>account<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        params<span class="token punctuation">.</span>email <span class="token operator">=</span> account<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token function">handlegetRegistVCodeProxy</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        root<span class="token punctuation">.</span>$Message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">content</span><span class="token operator">:</span> root<span class="token punctuation">.</span><span class="token function">$t</span><span class="token punctuation">(</span><span class="token string">&#39;common.message.success&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span> <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> <span class="token function-variable function">handleLogin</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      root<span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      formParams<span class="token punctuation">,</span>
      rulesConfig<span class="token punctuation">,</span>
      handleSubmit<span class="token punctuation">,</span>
      handleProtal<span class="token punctuation">,</span>
      sendCode<span class="token punctuation">,</span>
      handleLogin<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>不知道你注意一段代码没有，以前的表单校验<code>rule</code>与<code>formParams</code>全部从<code>useRegister</code>解构了出来，在<code>vue3</code>大量的<code>api</code>都是用<code>hooks</code>的思想写的，与<code>react</code>越来越相似，在<code>react</code>中，函数式组件，<code>hooks</code>极大的解耦了业务组件，React 构建的页面思想就是像搭积木一样，每个视图模块就是一个组件，在<code>vue2</code>之前虽然提供了<code>render</code>渲染组件，但是对于像<code>react</code>一样天然支持<code>jsx</code>的能力还是非常欠缺,虽然在<code>vue</code>也可以申明函数组件，也提供的<code>template</code>模板的方式。但是<code>composition-api</code>除了支持<code>jsx</code>，有更大的<code>ts</code>能力，让你组织你的代码，更强壮，可维护性更强，业务逻辑能进一步复用并减少耦合。</p><p>接下来我们来看下<code>useRegister</code>这个引入的<code>hook</code>,我们通常把这个方法有个更优雅的名字来定义它<code>useXXXX</code>,也就是类比 react 中的<code>hook</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// hooks/index.ts</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> reactive<span class="token punctuation">,</span> toRefs<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vue/composition-api&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> i18n <span class="token keyword">from</span> <span class="token string">&#39;@/i18n/index&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> commonRegexp <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@/utils/index&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// step进度条</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useStepConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> setUpConfig <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">currentStep</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token literal-property property">steps</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.steps.one&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.steps.two&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token literal-property property">label</span><span class="token operator">:</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.steps.three&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>setUpConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 账号注册</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useRegister</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> registeConfig <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">formParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">account</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">agreeAndComply</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">useServer</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rules</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">useServer</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;change&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">_rule</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.useServer.message&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">account</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
          <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">_rule</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.account.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>
              <span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">MOBILE_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
              <span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">EMAIL_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.account.message&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">_rule</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>commonRegexp<span class="token punctuation">.</span><span class="token constant">PASSWORD_REG_EXP</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.password.regCheckMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">rpassword</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">_rule</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!==</span> registeConfig<span class="token punctuation">.</span>formParams<span class="token punctuation">.</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.rpassword.notMatchMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">authCode</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          <span class="token function-variable function">validator</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">_rule</span><span class="token operator">:</span> any<span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> string<span class="token punctuation">,</span> <span class="token literal-property property">callback</span><span class="token operator">:</span> Function</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span>i18n<span class="token punctuation">.</span><span class="token function">t</span><span class="token punctuation">(</span><span class="token string">&#39;register.registerForm.authCode.emptyMessage&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;blur&#39;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">toRefs</span><span class="token punctuation">(</span>registeConfig<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 信息填写</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">userRegistInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token operator">...</span>
   <span class="token keyword">return</span> <span class="token punctuation">{</span>

   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个<code>hook</code>文件已经把三个步奏用到的数据层已经高度的分离了出去，在实际业务中，你并不一定需要写在一个文件中,如果涉及多人合作，那么你可以把<code>index</code>里面拆分得更细些，比如这里你差分成三个不同<code>ts</code>文件<code>userRegistInfo.ts</code>、<code>useRegister.ts</code>、<code>useStepConfig.ts</code>，我们把每一块自己需要数据写入自己相关的<code>hooks</code>中，这样每个人只需要维护自己那份代码就行。</p><p>看到这里你是否感受到<code>composition-api</code>的思想呢，在<code>vue3</code>中，所有的<code>api</code>用法几乎与<code>composition-api</code>用法一样，在官方有这么一段话,<code>当迁移到 Vue 3 时，只需简单的将 @vue/composition-api 替换成 vue 即可。你现有的代码几乎无需进行额外的改动。</code>。看到这里，你情不自禁的发出尖叫，<code>vue3</code>向下兼容了<code>vue2</code>,并且当你用<code>composition-api</code>过渡<code>vue3</code>时，我只需要全局替换一下<code>@vue/composition-api</code>这个就可以全量升级到<code>vue3</code>了。</p><p>此时你心中有没有被震惊到，赶紧升级你项目的<code>vue2</code>,让你自己在<code>vue2</code>的项目中也能畅游<code>vue3</code>的各种姿势，哈哈。 <img src="https://img.soogif.com/8CMCL0jH4GcLNpUTiyKs5HqxDhRm4JHv.gif?scope=mdnice" alt=""></p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><p>1.在 vue2 中使用<code>options</code>面条方式编码，业务页面有冗余代码，当我们发现字段设计与交互有差别时，可以与产品设计沟通，用你的理由说服他</p><p>2.在 vue2 中用<code>composition-api</code>方式组织你的业务代码时，明显感受到业务逻辑比以前更清晰，并且天然支持<code>ts</code>,让你的代码更安全，更强壮 💪</p><p>3.类似 react 的<code>hook</code>思想，高度解耦业务视图层的数据逻辑，让你更专注解决疑难杂症，或者有更多的时间轻松聊天喝茶摸鱼。</p><p>4.更多关于<a href="https://github.com/vuejs/composition-api/blob/main/README.zh-CN.md" title="composition-api" target="_blank" rel="noopener noreferrer">composition-api<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>,更多 vue3 参考<a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html" title="官网" target="_blank" rel="noopener noreferrer">官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/maicFir/maicFir.github.io/edit/dev2.0/front/frame/vue/2022-01-15.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">作者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: anne.duan@aax.com">maicFir</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a aria-current="page" href="/front/frame/vue/2022-01-15.html" class="router-link-active router-link-exact-active router-link-active" aria-label="组合式API最佳实践"><!--[--><!--]--> 组合式API最佳实践 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.b0cbb33e.js" defer></script>
  </body>
</html>
