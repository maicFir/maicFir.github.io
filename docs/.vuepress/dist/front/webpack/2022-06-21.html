<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" href="/images/n_logo.png"><link rel="manifest" href="/manifest.webmanifest.json"><meta name="viewport" content="width=device-width,width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"><meta name="referrer" content="no-referrer"><meta data-draft-node="block" data-draft-type="table" data-size="normal" data-row-style="normal"><title>WDS必知必会 | Web技术学院</title><meta name="description" content="专注前端技术，分享web技术">
    <link rel="modulepreload" href="/assets/app.23aa111b.js"><link rel="modulepreload" href="/assets/2022-06-21.html.697870ec.js"><link rel="modulepreload" href="/assets/2022-06-21.html.b65dfa8b.js"><link rel="prefetch" href="/assets/index.html.b0267837.js"><link rel="prefetch" href="/assets/config.html.11061a56.js"><link rel="prefetch" href="/assets/index.html.48af1cdf.js"><link rel="prefetch" href="/assets/2022-01-07.html.acef6471.js"><link rel="prefetch" href="/assets/2022-01-30.html.040b1196.js"><link rel="prefetch" href="/assets/2022-02-15.html.f38b6d77.js"><link rel="prefetch" href="/assets/2022-03-21.html.844a393d.js"><link rel="prefetch" href="/assets/2022-03-29.html.e8a1a3c6.js"><link rel="prefetch" href="/assets/2022-04-10.html.b4441b34.js"><link rel="prefetch" href="/assets/2022-04-13.html.277a9601.js"><link rel="prefetch" href="/assets/2022-04-28.html.1d05a0ae.js"><link rel="prefetch" href="/assets/2022-05-01.html.5379acad.js"><link rel="prefetch" href="/assets/2022-05-02.html.15f49d31.js"><link rel="prefetch" href="/assets/2022-05-10.html.89c02d16.js"><link rel="prefetch" href="/assets/2022-05-12.html.e0cd8ba0.js"><link rel="prefetch" href="/assets/2022-05-25.html.b1c99843.js"><link rel="prefetch" href="/assets/2022-06-15.html.71223634.js"><link rel="prefetch" href="/assets/2022-06-27.html.d3acaf23.js"><link rel="prefetch" href="/assets/2022-07-12.html.691877e9.js"><link rel="prefetch" href="/assets/2022-07-14.html.73b946c9.js"><link rel="prefetch" href="/assets/Advance.html.0d332483.js"><link rel="prefetch" href="/assets/index.html.5bb90c9b.js"><link rel="prefetch" href="/assets/2022-04-17.html.8df2755a.js"><link rel="prefetch" href="/assets/2022-05-03.html.7b1fe926.js"><link rel="prefetch" href="/assets/2022-05-17.html.4824b234.js"><link rel="prefetch" href="/assets/2022-05-27.html.d17f420d.js"><link rel="prefetch" href="/assets/2022-05-29.html.fdfee9c7.js"><link rel="prefetch" href="/assets/index.html.eb03efab.js"><link rel="prefetch" href="/assets/2022-01-11.html.d3379b31.js"><link rel="prefetch" href="/assets/index.html.7ed74cb4.js"><link rel="prefetch" href="/assets/2022-03-07.html.69a705fd.js"><link rel="prefetch" href="/assets/index.html.fb3c0761.js"><link rel="prefetch" href="/assets/2022-06-03.html.3597757e.js"><link rel="prefetch" href="/assets/2022-06-05.html.0cbb117d.js"><link rel="prefetch" href="/assets/2022-06-07.html.423f7dfb.js"><link rel="prefetch" href="/assets/2022-06-10.html.f791a2f7.js"><link rel="prefetch" href="/assets/2022-06-14.html.c3b8d4ad.js"><link rel="prefetch" href="/assets/2022-06-15.html.b78bae04.js"><link rel="prefetch" href="/assets/2022-06-24.html.42456bbb.js"><link rel="prefetch" href="/assets/2022-06-29.html.58b78e02.js"><link rel="prefetch" href="/assets/2022-07-03.html.251d2947.js"><link rel="prefetch" href="/assets/2022-07-05.html.5f8d31e1.js"><link rel="prefetch" href="/assets/2022-07-06.html.bb1407ba.js"><link rel="prefetch" href="/assets/2022-07-10.html.61003676.js"><link rel="prefetch" href="/assets/index.html.2b1ae216.js"><link rel="prefetch" href="/assets/2022-05-08.html.f67fc422.js"><link rel="prefetch" href="/assets/2022-07-22.html.9f3dd1c4.js"><link rel="prefetch" href="/assets/index.html.56394ab8.js"><link rel="prefetch" href="/assets/index.html.7b6ad27f.js"><link rel="prefetch" href="/assets/2022-01-15.html.d7e47800.js"><link rel="prefetch" href="/assets/2022-05-20.html.46e85dda.js"><link rel="prefetch" href="/assets/2022-05-23.html.d0c66290.js"><link rel="prefetch" href="/assets/index.html.a2a904fc.js"><link rel="prefetch" href="/assets/404.html.265028f6.js"><link rel="prefetch" href="/assets/index.html.688fb096.js"><link rel="prefetch" href="/assets/config.html.e1cba641.js"><link rel="prefetch" href="/assets/index.html.531cf218.js"><link rel="prefetch" href="/assets/2022-01-07.html.fd231357.js"><link rel="prefetch" href="/assets/2022-01-30.html.34a6ad3c.js"><link rel="prefetch" href="/assets/2022-02-15.html.d6debbb2.js"><link rel="prefetch" href="/assets/2022-03-21.html.7bf1ae19.js"><link rel="prefetch" href="/assets/2022-03-29.html.bf3e060e.js"><link rel="prefetch" href="/assets/2022-04-10.html.7cfaa1b3.js"><link rel="prefetch" href="/assets/2022-04-13.html.a68b91b1.js"><link rel="prefetch" href="/assets/2022-04-28.html.5dcb649c.js"><link rel="prefetch" href="/assets/2022-05-01.html.9aaae313.js"><link rel="prefetch" href="/assets/2022-05-02.html.346f279f.js"><link rel="prefetch" href="/assets/2022-05-10.html.367a3ed5.js"><link rel="prefetch" href="/assets/2022-05-12.html.637bb6ab.js"><link rel="prefetch" href="/assets/2022-05-25.html.c262a300.js"><link rel="prefetch" href="/assets/2022-06-15.html.adfa100e.js"><link rel="prefetch" href="/assets/2022-06-27.html.21156688.js"><link rel="prefetch" href="/assets/2022-07-12.html.40cee7b9.js"><link rel="prefetch" href="/assets/2022-07-14.html.fb7ed60e.js"><link rel="prefetch" href="/assets/Advance.html.cf3168ca.js"><link rel="prefetch" href="/assets/index.html.0aaaf202.js"><link rel="prefetch" href="/assets/2022-04-17.html.bc099684.js"><link rel="prefetch" href="/assets/2022-05-03.html.931749a1.js"><link rel="prefetch" href="/assets/2022-05-17.html.63ab9601.js"><link rel="prefetch" href="/assets/2022-05-27.html.8afe450a.js"><link rel="prefetch" href="/assets/2022-05-29.html.ee7140e2.js"><link rel="prefetch" href="/assets/index.html.5f730ce4.js"><link rel="prefetch" href="/assets/2022-01-11.html.2b618e80.js"><link rel="prefetch" href="/assets/index.html.e635aa93.js"><link rel="prefetch" href="/assets/2022-03-07.html.e1c6dd33.js"><link rel="prefetch" href="/assets/index.html.f3ad7875.js"><link rel="prefetch" href="/assets/2022-06-03.html.0cc5831d.js"><link rel="prefetch" href="/assets/2022-06-05.html.2aa9ec20.js"><link rel="prefetch" href="/assets/2022-06-07.html.be0e1a62.js"><link rel="prefetch" href="/assets/2022-06-10.html.fa25ea14.js"><link rel="prefetch" href="/assets/2022-06-14.html.fb98756d.js"><link rel="prefetch" href="/assets/2022-06-15.html.6122598f.js"><link rel="prefetch" href="/assets/2022-06-24.html.57cdb8d3.js"><link rel="prefetch" href="/assets/2022-06-29.html.d0c5982c.js"><link rel="prefetch" href="/assets/2022-07-03.html.b5f81a4b.js"><link rel="prefetch" href="/assets/2022-07-05.html.4886e248.js"><link rel="prefetch" href="/assets/2022-07-06.html.83a06b3e.js"><link rel="prefetch" href="/assets/2022-07-10.html.86615ea8.js"><link rel="prefetch" href="/assets/index.html.ec4cd03d.js"><link rel="prefetch" href="/assets/2022-05-08.html.7388a1fa.js"><link rel="prefetch" href="/assets/2022-07-22.html.23d72d57.js"><link rel="prefetch" href="/assets/index.html.e62923f1.js"><link rel="prefetch" href="/assets/index.html.0b9a0b4d.js"><link rel="prefetch" href="/assets/2022-01-15.html.a39cbf57.js"><link rel="prefetch" href="/assets/2022-05-20.html.bb187c22.js"><link rel="prefetch" href="/assets/2022-05-23.html.f92aec31.js"><link rel="prefetch" href="/assets/index.html.6d864242.js"><link rel="prefetch" href="/assets/404.html.d8cf8387.js"><link rel="prefetch" href="/assets/404.1a206f6b.js"><link rel="prefetch" href="/assets/Layout.b966f7ac.js"><link rel="prefetch" href="/assets/ActionFied.ed5ea5c4.js"><link rel="prefetch" href="/assets/index.0e8935cb.js">
    <link rel="stylesheet" href="/assets/style.8a8796b4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><!----><span class="site-name">Web技术学院</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/front/frame/vue/" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/front/frame/react/" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/front/leetcode/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/ts/" class="" aria-label="TS"><!--[--><!--]--> TS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/webpack/" class="router-link-active" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="社交"><span class="title">社交</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="社交"><span class="title">社交</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/4142615542920680" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://segmentfault.com/u/maicfir" rel="noopener noreferrer" target="_blank" aria-label="segmentfault"><!--[--><!--]--> segmentfault <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/maicFir/lessonNote" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maicFir/maicFir.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Web技术"><span class="title">Web技术</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/js/" class="" aria-label="JS"><!--[--><!--]--> JS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/css/" class="" aria-label="CSS"><!--[--><!--]--> CSS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><!--[--><h4 class="navbar-dropdown-subtitle"><span>框架</span></h4><ul class="navbar-dropdown-subitem-wrapper"><!--[--><li class="navbar-dropdown-subitem"><a href="/front/frame/vue/" class="" aria-label="vue"><!--[--><!--]--> vue <!--[--><!--]--></a></li><li class="navbar-dropdown-subitem"><a href="/front/frame/react/" class="" aria-label="react"><!--[--><!--]--> react <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><li class="navbar-dropdown-item"><a href="/front/leetcode/" class="" aria-label="算法"><!--[--><!--]--> 算法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/ts/" class="" aria-label="TS"><!--[--><!--]--> TS <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/front/node/" class="" aria-label="node"><!--[--><!--]--> node <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="工程化"><span class="title">工程化</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="工程化"><span class="title">工程化</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/front/webpack/" class="router-link-active" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="社交"><span class="title">社交</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="社交"><span class="title">社交</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a class="external-link" href="https://juejin.cn/user/4142615542920680" rel="noopener noreferrer" target="_blank" aria-label="掘金"><!--[--><!--]--> 掘金 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://segmentfault.com/u/maicfir" rel="noopener noreferrer" target="_blank" aria-label="segmentfault"><!--[--><!--]--> segmentfault <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a class="external-link" href="https://github.com/maicFir/lessonNote" rel="noopener noreferrer" target="_blank" aria-label="github"><!--[--><!--]--> github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/maicFir/maicFir.github.io" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active"> <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/front/webpack/" class="router-link-active sidebar-item" aria-label="webpack"><!--[--><!--]--> webpack <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-03.html" class="sidebar-item" aria-label="webpack从0到1构建"><!--[--><!--]--> webpack从0到1构建 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-05.html" class="sidebar-item" aria-label="webpack构建自定义react应用"><!--[--><!--]--> webpack构建自定义react应用 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-07.html" class="sidebar-item" aria-label="webpack构建自定义vue应用"><!--[--><!--]--> webpack构建自定义vue应用 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-10.html" class="sidebar-item" aria-label="webpack5资源最佳加载方案"><!--[--><!--]--> webpack5资源最佳加载方案 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-14.html" class="sidebar-item" aria-label="揭秘webpack5模块打包"><!--[--><!--]--> 揭秘webpack5模块打包 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-15.html" class="sidebar-item" aria-label="项目eslint从零到一"><!--[--><!--]--> 项目eslint从零到一 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/webpack/2022-06-21.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="WDS必知必会"><!--[--><!--]--> WDS必知必会 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/front/webpack/2022-06-21.html#了解webpack-dev-server" class="router-link-active router-link-exact-active sidebar-item" aria-label="了解webpack-dev-server"><!--[--><!--]--> 了解webpack-dev-server <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/webpack/2022-06-21.html#wds-在-webpack-中的使用" class="router-link-active router-link-exact-active sidebar-item" aria-label="wds 在 webpack 中的使用"><!--[--><!--]--> wds 在 webpack 中的使用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/webpack/2022-06-21.html#proxy" class="router-link-active router-link-exact-active sidebar-item" aria-label="proxy"><!--[--><!--]--> proxy <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/webpack/2022-06-21.html#wds-模块热加载原理-hmr" class="router-link-active router-link-exact-active sidebar-item" aria-label="WDS 模块热加载原理(HMR)"><!--[--><!--]--> WDS 模块热加载原理(HMR) <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/front/webpack/2022-06-21.html#总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="总结"><!--[--><!--]--> 总结 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/front/webpack/2022-06-24.html" class="sidebar-item" aria-label="爆肝总结万字长文笔记webpack5打包资源优化"><!--[--><!--]--> 爆肝总结万字长文笔记webpack5打包资源优化 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-06-29.html" class="sidebar-item" aria-label="webpack5构建一个通用的组件库"><!--[--><!--]--> webpack5构建一个通用的组件库 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-07-03.html" class="sidebar-item" aria-label="放弃webpack,拥抱gulp"><!--[--><!--]--> 放弃webpack,拥抱gulp <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-07-05.html" class="sidebar-item" aria-label="介绍几个不太常用的打包分析工具"><!--[--><!--]--> 介绍几个不太常用的打包分析工具 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-07-06.html" class="sidebar-item" aria-label="Module Federation最佳实践"><!--[--><!--]--> Module Federation最佳实践 <!--[--><!--]--></a><!----></li><li><a href="/front/webpack/2022-07-10.html" class="sidebar-item" aria-label="写一个自定义loader，看完，就会"><!--[--><!--]--> 写一个自定义loader，看完，就会 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><p>在<code>webpack</code>中构建本地服务，最重要的一个插件<code>webpack-dev-server</code>,我们俗称<code>WDS</code>,它承担起了在开发环境<code>模块热加载</code>、<code>本地服务</code>、<code>接口代理</code>等非常重要的功能。</p><p>本文是笔者对<code>wds</code>的一些理解和认识，希望在项目中有所帮助。</p><p>正文开始...</p><p>在阅读本文之前，本文会大概从下几个方面去了解<code>wds</code></p><p>1、了解<code>wds</code>是什么</p><p>2、<code>wds</code>在 webpack 中如何使用</p><p>3、项目中使用<code>wds</code>是怎么样的</p><p>4、关于配置<code>devServer</code>的一些常用配置，代理等</p><p>5、<code>wds</code>如何实现模块热加载原理</p><h3 id="了解webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#了解webpack-dev-server" aria-hidden="true">#</a> 了解<code>webpack-dev-server</code></h3><p>顾名思义，这是一个在<code>开发环境</code>下的使用的<code>本地服务</code>，它承担了一个提供前端静态服务的作用</p><p>首先我们快速搭建一个项目,创建一个项目<code>webpack-07-wds</code>执行<code>npm init -y</code>,然后安装基础支持的插件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i webpack webpack<span class="token operator">-</span>cli html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">-</span><span class="token constant">D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>创建一个<code>webpack.config.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;js/[name].js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./public/index.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在根目录下创建<code>public</code>,新建<code>html</code>文件</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>webpack-for-dev-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们在入口文件写入一段简单的代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// index</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> appDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  appDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;hello webpack for wds&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们已经准备好了内容，现在需要启动<code>wds</code>，因此我们需要在在<code>package.json</code>中启动服务</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>执行<code>npm run start</code></p><p><img src="https://files.mdnice.com/user/24614/2a36ab68-179c-43cb-a70f-e074c9d0a634.png" alt=""></p><p>万事大吉，原来就是一行命令就可以了</p><p>但是这行命令的背后实际上有<code>webpack-cli</code>帮我们做了一下事情，实际上在<code>.bin</code>目录下，当你执行该命令时，<code>webpack</code>就会启用告知<code>webpack-dev-server</code>开启服务，通过<code>webpack</code>根据<code>webpack.config.js</code>的配置信息进行<code>compiler</code>,然后再交给<code>webpack-dev-server</code>处理</p><p>参考官方文档<a href="https://webpack.docschina.org/api/webpack-dev-server/" title="webpack-dev-server" target="_blank" rel="noopener noreferrer">webpack-dev-server<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>根目录新建<code>server.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// webpack处理入口配置相关文件</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>webpackConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// devServer的相关配置</span>
<span class="token keyword">const</span> devServerOption <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">,</span>
  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// 开启gizps压缩public中的html</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span>devServerOption<span class="token punctuation">,</span> compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">startServer</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;server is start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">startServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>终端执行<code>node server.js</code>或者在<code>package.json</code>中配置,执行<code>npm run server</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./server.js&quot;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>打开页面<code>http://localhost:8081</code>地址，发现是<code>ok</code>的</p><p>我们注意到可以使用<code>webpack server</code>启动服务，这个主要是<code>webpack-cli</code>的命令<a href="https://github.com/webpack/webpack-cli/blob/master/SERVE-OPTIONS-v4.md" title="server" target="_blank" rel="noopener noreferrer">server<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>关于在命令行中设置对应的环境，在以前项目中可能你会看到，<code>p<wbr>rocess.env.NODE_ENV</code>这样的设置</p><p>你可以在<code>cli</code>命令中配置,注意只能在最前面设置，不能像以下这种方式设置<s>webpack server NODE_ENV=test NODE_API=api</s>，不然会无效</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NODE_ENV=test NODE_API=api webpack server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./server.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在<code>webpack.config.js</code>中就可以看到设置的参数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_API</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// test api</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;js/[name].js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./public/index.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以设置<code>--node-env xxx</code>环境参数来指定环境变量</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code> <span class="token property">&quot;start:test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server --node-env test&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更多参数设置参考官方<a href="https://webpack.docschina.org/api/cli/" title="cli" target="_blank" rel="noopener noreferrer">cli<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="wds-在-webpack-中的使用" tabindex="-1"><a class="header-anchor" href="#wds-在-webpack-中的使用" aria-hidden="true">#</a> wds 在 webpack 中的使用</h3><p>我们上述是用一个<code>server.js</code>，通过命令行方式，调用<code>webpack-dev-server</code>API 方式去启动一个本地的静态服务，但是实际上，在<code>webpack</code>中直接在配置<a href="https://webpack.docschina.org/configuration/dev-server/" title="devServer" target="_blank" rel="noopener noreferrer">devServer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>接口中配置就行。</p><p>了解几个常用的配置</p><ul><li><code>port</code> 指定端口打开页面</li><li><code>client</code><ul><li>overlay 当程序错误时，浏览器页面全屏警告</li><li>webSocketURL 允许指定 websocket 服务器</li></ul></li><li><code>progress</code> 启动开发环境 gizp 压缩静态 html</li><li><code>historyApiFallback</code> 当使用路由模式为 history 时，必须设置这个，要不然前端刷新直接 404 页面</li><li><code>hot</code>模块热加载，需要结合<code>module.hot.accept(&#39;xxx/xxx&#39;)</code>指定某个模块热加载<a href="https://webpack.docschina.org/api/hot-module-replacement/" target="_blank" rel="noopener noreferrer">module.hot.accept<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>open 当我们启动本地服务时，自动打开指定配置端口的浏览器</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;9000&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 启用gizp</span>
      <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 如果有错误会有蒙层</span>
        <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">webSocketURL</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/ws&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;ws&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 使用路由模式为history时，必须设置这个，要不然前端刷新会直接404页面</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 模块热加载，对应模块须配合module.hot.accept(&#39;xxx/xxx.js&#39;)指定模块热加载</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 当服务启动时默认自动直接打开浏览器，可以指定打开哪个页面</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> proxy</h3><p><code>proxy</code> 这是项目中接触最多一点，也是初学者配置代理时常最令人头疼的事情，实际上<code>proxy</code>本质就是将本地的<code>接口路由前缀</code>代理到目标服务器环境,可以同时代理多个不同环境,具体参考以下</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理豆瓣</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理王者荣耀官网</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 必须要加，否则代理接口直接返回html</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们修改<code>index.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">$</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> appDomMovie <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;movie&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> gameDom <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;wang&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// appDom.innerHTML = &#39;hello webpack for wds,&#39;;</span>
  <span class="token comment">// https://movie.douban.com/j/new_search_subjects?sort=U&amp;range=0,10&amp;tags=%E7%94%B5%E5%BD%B1&amp;start=0</span>
  <span class="token comment">// 豆瓣电影</span>
  <span class="token keyword">const</span> <span class="token function-variable function">featchMovie</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/j/new_search_subjects?sort=U&amp;range=0,10&amp;tags=%E7%94%B5%E5%BD%B1&amp;start=0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(data)</span>
    <span class="token keyword">const</span> divDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> rate <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
      str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"> &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>rate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    divDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
    appDomMovie<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>divDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">featchMovie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">wangzherongyao</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> divDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// https://apps.game.qq.com/cmc/cross?serviceId=18&amp;filter=tag&amp;sortby=sIdxTime&amp;source=web_pc&amp;limit=20&amp;logic=or&amp;typeids=1%2C2&amp;exclusiveChannel=4&amp;exclusiveChannelSign=8a28b7e82d30142c1a986bb7acdcc068&amp;time=1655732988&amp;tagids=931</span>
    <span class="token comment">// 王者荣耀官网</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>
      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
        <span class="token string">&#39;/cmc/cross?serviceId=18&amp;filter=tag&amp;sortby=sIdxTime&amp;source=web_pc&amp;limit=20&amp;logic=or&amp;typeids=1%2C2&amp;exclusiveChannel=4&amp;exclusiveChannelSign=8a28b7e82d30142c1a986bb7acdcc068&amp;time=1655732988&amp;tagids=931&#39;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
    items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> sTitle<span class="token punctuation">,</span> sIMG <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
      str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div&gt;
          &lt;img src=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sIMG<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> /&gt;
          &lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
      &lt;/div&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    divDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
    gameDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>divDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">wangzherongyao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://files.mdnice.com/user/24614/866fd77d-f174-45f2-a119-e8235b5aae70.png" alt=""> 对应的两个接口数据就已经在页面上渲染出来了</p><p>对于代理我们会常常容易会犯以下<code>几个误区</code></p><ul><li>第一种, 多个接口代理，第一个直接以<code>/</code>代理，这会造成第二个代理无效，接口直接 404，优先级会先匹配第一个</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
 <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理豆瓣</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理王者荣耀官网</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 必须要加，否则代理接口直接返回html</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第二种，<code>pathRewrite</code>要不要加，什么时候该加，不知道你发现没有我第一个接口拦截并没有加<code>pathRewrite</code>，但是和第二个加了效果是一样的。</li></ul><p>现在有一个场景，就是你本地测试服务接口与线上接口是有区别的，一般你在本地开发是联调环境，后端的接口不按照常理出牌，假设联调环境后端就是死活不同意统一接口路径怎么办？</p><p>现在假设后端接口</p><p>联调环境:<code>/dev/api/cmc/cross</code></p><p>线上环境是<code>/api/cmc/cross</code></p><p>于是你想到有以下两种方案：</p><p>1、在 axios 请求拦截根据<code>环境变量</code>手动添加前缀,但是这不是一种很好的方案，相当于把不确定性的逻辑代码打包到线上去了，有一定风险</p><p>2、不管开发环境还是本地联调环境都是统一的路径，仅仅只是在<code>proxy</code>的<code>pathRewrite</code>做处理，这样风险很小，不容易造成线上接口 404 风险</p><p>于是这时候<code>pathRewrite</code>的作用就来了,重写路径，注意是<code>pathRewrite: { &#39;^/cmc&#39;: &#39;/dev/cmc&#39; }</code></p><p>我们仅仅是在开发环境重新了<code>/cmc</code>接口路径，实际上代码环境的代码并不会打包到线上</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token punctuation">{</span>
 <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理豆瓣</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理王者荣耀官网</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 必须要加，否则代理接口直接返回html</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/dev/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>第三种，缺少<code>changeOrigin:true</code>，像下面这种丢失了<code>changeOrigin</code>是不行的</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理豆瓣</span>
        <span class="token comment">// changeOrigin: true,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/j&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/j&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 代理王者荣耀官网</span>
        <span class="token comment">//changeOrigin: true,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/dev/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果遇到有多个路由指向的是同一个服务器怎么办，别急，官网有方案，你可以这么做</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/j&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/cmc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>项目常用的就是以上这些了，另外拓展的，比如可以支持本地<code>https</code>，因为默认本地是<code>http</code>,还有支持当前可以开启一个<code>websocket</code>服务，更多配置参考官网，或者有更多特别的需求，及时翻阅<a href="https://webpack.docschina.org/configuration/dev-server/" title="官网" target="_blank" rel="noopener noreferrer">官网<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="wds-模块热加载原理-hmr" tabindex="-1"><a class="header-anchor" href="#wds-模块热加载原理-hmr" aria-hidden="true">#</a> WDS 模块热加载原理(HMR)</h3><p>只更新页面模块变化的内容，无需全站刷新</p><p>本质上就是<code>webpack-dev-server</code>中的两个服务，一个<code>express</code>提供的静态服务，通过<code>webpack</code>去<code>compiler</code>入口的依赖文件，加载打包内存中的<code>bundle.js</code></p><p>第二个模块热加载是一个<code>websocket</code>服务，通过<code>socketio</code>,当源码静态文件发生变化时，此时会生成一个<code>manifest</code>文件，这个文件会记录一个<code>hash</code>以及对应文件修改的<code>chunk.js</code>,当文件修改时<code>websocket</code>会单独向浏览器发送一个<code>ws</code>服务，从而更新页面部分模块，更多可以参考官网<a href="https://webpack.docschina.org/concepts/hot-module-replacement/" title="hot-module-replacement" target="_blank" rel="noopener noreferrer">hot-module-replacement<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h3><ul><li><p>了解<code>webpack-dev-server</code>是什么，它是一个开发环境的静态服务</p></li><li><p><code>webpack-dev-server</code>在 webpack 中的使用</p></li><li><p>关于<code>WDS</code>一些常用的配置，比如如何配置接口代理等</p></li><li><p>浅识<code>HMR</code>模块热加载，原生<code>webpack</code>虽然也提供了模块热加载，但是<code>webpack-dev-server</code>可以实现模块热加载，常用框架，比如<code>vue</code>，内部热加载是用<code>vue-loader</code>实现的，在使用<code>WDS</code>时，默认是开启了热加载的。</p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/maicFir/maicFir.github.io/edit/dev2.0/front/webpack/2022-06-21.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">作者: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: anne.duan@aax.com">maicFir</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/front/webpack/2022-06-15.html" class="" aria-label="项目eslint从零到一"><!--[--><!--]--> 项目eslint从零到一 <!--[--><!--]--></a></span><span class="next"><a href="/front/webpack/2022-06-24.html" class="" aria-label="爆肝总结万字长文笔记webpack5打包资源优化"><!--[--><!--]--> 爆肝总结万字长文笔记webpack5打包资源优化 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.23aa111b.js" defer></script>
  </body>
</html>
