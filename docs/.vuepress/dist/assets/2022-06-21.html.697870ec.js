import{_ as e,o,c,a as n,d as t,e as a,b as s,r as l}from"./app.23aa111b.js";const i={},r=a(`<p>\u5728<code>webpack</code>\u4E2D\u6784\u5EFA\u672C\u5730\u670D\u52A1\uFF0C\u6700\u91CD\u8981\u7684\u4E00\u4E2A\u63D2\u4EF6<code>webpack-dev-server</code>,\u6211\u4EEC\u4FD7\u79F0<code>WDS</code>,\u5B83\u627F\u62C5\u8D77\u4E86\u5728\u5F00\u53D1\u73AF\u5883<code>\u6A21\u5757\u70ED\u52A0\u8F7D</code>\u3001<code>\u672C\u5730\u670D\u52A1</code>\u3001<code>\u63A5\u53E3\u4EE3\u7406</code>\u7B49\u975E\u5E38\u91CD\u8981\u7684\u529F\u80FD\u3002</p><p>\u672C\u6587\u662F\u7B14\u8005\u5BF9<code>wds</code>\u7684\u4E00\u4E9B\u7406\u89E3\u548C\u8BA4\u8BC6\uFF0C\u5E0C\u671B\u5728\u9879\u76EE\u4E2D\u6709\u6240\u5E2E\u52A9\u3002</p><p>\u6B63\u6587\u5F00\u59CB...</p><p>\u5728\u9605\u8BFB\u672C\u6587\u4E4B\u524D\uFF0C\u672C\u6587\u4F1A\u5927\u6982\u4ECE\u4E0B\u51E0\u4E2A\u65B9\u9762\u53BB\u4E86\u89E3<code>wds</code></p><p>1\u3001\u4E86\u89E3<code>wds</code>\u662F\u4EC0\u4E48</p><p>2\u3001<code>wds</code>\u5728 webpack \u4E2D\u5982\u4F55\u4F7F\u7528</p><p>3\u3001\u9879\u76EE\u4E2D\u4F7F\u7528<code>wds</code>\u662F\u600E\u4E48\u6837\u7684</p><p>4\u3001\u5173\u4E8E\u914D\u7F6E<code>devServer</code>\u7684\u4E00\u4E9B\u5E38\u7528\u914D\u7F6E\uFF0C\u4EE3\u7406\u7B49</p><p>5\u3001<code>wds</code>\u5982\u4F55\u5B9E\u73B0\u6A21\u5757\u70ED\u52A0\u8F7D\u539F\u7406</p><h3 id="\u4E86\u89E3webpack-dev-server" tabindex="-1"><a class="header-anchor" href="#\u4E86\u89E3webpack-dev-server" aria-hidden="true">#</a> \u4E86\u89E3<code>webpack-dev-server</code></h3><p>\u987E\u540D\u601D\u4E49\uFF0C\u8FD9\u662F\u4E00\u4E2A\u5728<code>\u5F00\u53D1\u73AF\u5883</code>\u4E0B\u7684\u4F7F\u7528\u7684<code>\u672C\u5730\u670D\u52A1</code>\uFF0C\u5B83\u627F\u62C5\u4E86\u4E00\u4E2A\u63D0\u4F9B\u524D\u7AEF\u9759\u6001\u670D\u52A1\u7684\u4F5C\u7528</p><p>\u9996\u5148\u6211\u4EEC\u5FEB\u901F\u642D\u5EFA\u4E00\u4E2A\u9879\u76EE,\u521B\u5EFA\u4E00\u4E2A\u9879\u76EE<code>webpack-07-wds</code>\u6267\u884C<code>npm init -y</code>,\u7136\u540E\u5B89\u88C5\u57FA\u7840\u652F\u6301\u7684\u63D2\u4EF6</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>npm i webpack webpack<span class="token operator">-</span>cli html<span class="token operator">-</span>webpack<span class="token operator">-</span>plugin webpack<span class="token operator">-</span>dev<span class="token operator">-</span>server <span class="token operator">-</span><span class="token constant">D</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u521B\u5EFA\u4E00\u4E2A<code>webpack.config.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;js/[name].js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./public/index.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728\u6839\u76EE\u5F55\u4E0B\u521B\u5EFA<code>public</code>,\u65B0\u5EFA<code>html</code>\u6587\u4EF6</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>X-UA-Compatible<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>IE=edge<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>webpack-for-dev-server<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728\u5165\u53E3\u6587\u4EF6\u5199\u5165\u4E00\u6BB5\u7B80\u5355\u7684\u4EE3\u7801</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// index</span>
<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> appDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;app&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  appDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">&#39;hello webpack for wds&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5DF2\u7ECF\u51C6\u5907\u597D\u4E86\u5185\u5BB9\uFF0C\u73B0\u5728\u9700\u8981\u542F\u52A8<code>wds</code>\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u5728\u5728<code>package.json</code>\u4E2D\u542F\u52A8\u670D\u52A1</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6267\u884C<code>npm run start</code></p><p><img src="https://files.mdnice.com/user/24614/2a36ab68-179c-43cb-a70f-e074c9d0a634.png" alt=""></p><p>\u4E07\u4E8B\u5927\u5409\uFF0C\u539F\u6765\u5C31\u662F\u4E00\u884C\u547D\u4EE4\u5C31\u53EF\u4EE5\u4E86</p><p>\u4F46\u662F\u8FD9\u884C\u547D\u4EE4\u7684\u80CC\u540E\u5B9E\u9645\u4E0A\u6709<code>webpack-cli</code>\u5E2E\u6211\u4EEC\u505A\u4E86\u4E00\u4E0B\u4E8B\u60C5\uFF0C\u5B9E\u9645\u4E0A\u5728<code>.bin</code>\u76EE\u5F55\u4E0B\uFF0C\u5F53\u4F60\u6267\u884C\u8BE5\u547D\u4EE4\u65F6\uFF0C<code>webpack</code>\u5C31\u4F1A\u542F\u7528\u544A\u77E5<code>webpack-dev-server</code>\u5F00\u542F\u670D\u52A1\uFF0C\u901A\u8FC7<code>webpack</code>\u6839\u636E<code>webpack.config.js</code>\u7684\u914D\u7F6E\u4FE1\u606F\u8FDB\u884C<code>compiler</code>,\u7136\u540E\u518D\u4EA4\u7ED9<code>webpack-dev-server</code>\u5904\u7406</p>`,25),u=s("\u53C2\u8003\u5B98\u65B9\u6587\u6863"),d={href:"https://webpack.docschina.org/api/webpack-dev-server/",title:"webpack-dev-server",target:"_blank",rel:"noopener noreferrer"},k=s("webpack-dev-server"),v=a(`<p>\u6839\u76EE\u5F55\u65B0\u5EFA<code>server.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackDevServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;webpack-dev-server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./webpack.config.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// webpack\u5904\u7406\u5165\u53E3\u914D\u7F6E\u76F8\u5173\u6587\u4EF6</span>
<span class="token keyword">const</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>webpackConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// devServer\u7684\u76F8\u5173\u914D\u7F6E</span>
<span class="token keyword">const</span> devServerOption <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8081</span><span class="token punctuation">,</span>
  <span class="token keyword">static</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">directory</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;public&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">compress</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">// \u5F00\u542Fgizps\u538B\u7F29public\u4E2D\u7684html</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">webpackDevServer</span><span class="token punctuation">(</span>devServerOption<span class="token punctuation">,</span> compiler<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">startServer</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;server is start&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> server<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">startServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7EC8\u7AEF\u6267\u884C<code>node server.js</code>\u6216\u8005\u5728<code>package.json</code>\u4E2D\u914D\u7F6E,\u6267\u884C<code>npm run server</code></p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./server.js&quot;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6253\u5F00\u9875\u9762<code>http://localhost:8081</code>\u5730\u5740\uFF0C\u53D1\u73B0\u662F<code>ok</code>\u7684</p>`,5),m=s("\u6211\u4EEC\u6CE8\u610F\u5230\u53EF\u4EE5\u4F7F\u7528"),b=n("code",null,"webpack server",-1),g=s("\u542F\u52A8\u670D\u52A1\uFF0C\u8FD9\u4E2A\u4E3B\u8981\u662F"),y=n("code",null,"webpack-cli",-1),h=s("\u7684\u547D\u4EE4"),w={href:"https://github.com/webpack/webpack-cli/blob/master/SERVE-OPTIONS-v4.md",title:"server",target:"_blank",rel:"noopener noreferrer"},_=s("server"),f=a(`<p>\u5173\u4E8E\u5728\u547D\u4EE4\u884C\u4E2D\u8BBE\u7F6E\u5BF9\u5E94\u7684\u73AF\u5883\uFF0C\u5728\u4EE5\u524D\u9879\u76EE\u4E2D\u53EF\u80FD\u4F60\u4F1A\u770B\u5230\uFF0C<code>p<wbr>rocess.env.NODE_ENV</code>\u8FD9\u6837\u7684\u8BBE\u7F6E</p><p>\u4F60\u53EF\u4EE5\u5728<code>cli</code>\u547D\u4EE4\u4E2D\u914D\u7F6E,\u6CE8\u610F\u53EA\u80FD\u5728\u6700\u524D\u9762\u8BBE\u7F6E\uFF0C\u4E0D\u80FD\u50CF\u4EE5\u4E0B\u8FD9\u79CD\u65B9\u5F0F\u8BBE\u7F6E<s>webpack server NODE_ENV=test NODE_API=api</s>\uFF0C\u4E0D\u7136\u4F1A\u65E0\u6548</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code>  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \\&quot;Error: no test specified\\&quot; &amp;&amp; exit 1&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;start&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NODE_ENV=test NODE_API=api webpack server&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;server&quot;</span><span class="token operator">:</span> <span class="token string">&quot;node ./server.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5728<code>webpack.config.js</code>\u4E2D\u5C31\u53EF\u4EE5\u770B\u5230\u8BBE\u7F6E\u7684\u53C2\u6570</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> htmlWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;html-webpack-plugin&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token punctuation">,</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_API</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// test api</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">entry</span><span class="token operator">:</span> <span class="token string">&#39;./src/index.js&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">&#39;development&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">output</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;dist&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">filename</span><span class="token operator">:</span> <span class="token string">&#39;js/[name].js&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">htmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">template</span><span class="token operator">:</span> <span class="token string">&#39;./public/index.html&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u8BBE\u7F6E<code>--node-env xxx</code>\u73AF\u5883\u53C2\u6570\u6765\u6307\u5B9A\u73AF\u5883\u53D8\u91CF</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code> <span class="token property">&quot;start:test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;webpack server --node-env test&quot;</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7),q=s("\u66F4\u591A\u53C2\u6570\u8BBE\u7F6E\u53C2\u8003\u5B98\u65B9"),j={href:"https://webpack.docschina.org/api/cli/",title:"cli",target:"_blank",rel:"noopener noreferrer"},x=s("cli"),E=n("h3",{id:"wds-\u5728-webpack-\u4E2D\u7684\u4F7F\u7528",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#wds-\u5728-webpack-\u4E2D\u7684\u4F7F\u7528","aria-hidden":"true"},"#"),s(" wds \u5728 webpack \u4E2D\u7684\u4F7F\u7528")],-1),D=s("\u6211\u4EEC\u4E0A\u8FF0\u662F\u7528\u4E00\u4E2A"),S=n("code",null,"server.js",-1),O=s("\uFF0C\u901A\u8FC7\u547D\u4EE4\u884C\u65B9\u5F0F\uFF0C\u8C03\u7528"),I=n("code",null,"webpack-dev-server",-1),N=s("API \u65B9\u5F0F\u53BB\u542F\u52A8\u4E00\u4E2A\u672C\u5730\u7684\u9759\u6001\u670D\u52A1\uFF0C\u4F46\u662F\u5B9E\u9645\u4E0A\uFF0C\u5728"),R=n("code",null,"webpack",-1),C=s("\u4E2D\u76F4\u63A5\u5728\u914D\u7F6E"),M={href:"https://webpack.docschina.org/configuration/dev-server/",title:"devServer",target:"_blank",rel:"noopener noreferrer"},T=s("devServer"),B=s("\u63A5\u53E3\u4E2D\u914D\u7F6E\u5C31\u884C\u3002"),P=n("p",null,"\u4E86\u89E3\u51E0\u4E2A\u5E38\u7528\u7684\u914D\u7F6E",-1),V=a("<li><code>port</code> \u6307\u5B9A\u7AEF\u53E3\u6253\u5F00\u9875\u9762</li><li><code>client</code><ul><li>overlay \u5F53\u7A0B\u5E8F\u9519\u8BEF\u65F6\uFF0C\u6D4F\u89C8\u5668\u9875\u9762\u5168\u5C4F\u8B66\u544A</li><li>webSocketURL \u5141\u8BB8\u6307\u5B9A websocket \u670D\u52A1\u5668</li></ul></li><li><code>progress</code> \u542F\u52A8\u5F00\u53D1\u73AF\u5883 gizp \u538B\u7F29\u9759\u6001 html</li><li><code>historyApiFallback</code> \u5F53\u4F7F\u7528\u8DEF\u7531\u6A21\u5F0F\u4E3A history \u65F6\uFF0C\u5FC5\u987B\u8BBE\u7F6E\u8FD9\u4E2A\uFF0C\u8981\u4E0D\u7136\u524D\u7AEF\u5237\u65B0\u76F4\u63A5 404 \u9875\u9762</li>",4),L=n("code",null,"hot",-1),W=s("\u6A21\u5757\u70ED\u52A0\u8F7D\uFF0C\u9700\u8981\u7ED3\u5408"),A=n("code",null,"module.hot.accept('xxx/xxx')",-1),$=s("\u6307\u5B9A\u67D0\u4E2A\u6A21\u5757\u70ED\u52A0\u8F7D"),H={href:"https://webpack.docschina.org/api/hot-module-replacement/",target:"_blank",rel:"noopener noreferrer"},U=s("module.hot.accept"),z=n("li",null,"open \u5F53\u6211\u4EEC\u542F\u52A8\u672C\u5730\u670D\u52A1\u65F6\uFF0C\u81EA\u52A8\u6253\u5F00\u6307\u5B9A\u914D\u7F6E\u7AEF\u53E3\u7684\u6D4F\u89C8\u5668",-1),F=a(`<div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token string">&#39;9000&#39;</span><span class="token punctuation">,</span>
      <span class="token literal-property property">client</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">progress</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u542F\u7528gizp</span>
      <span class="token literal-property property">overlay</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">errors</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5982\u679C\u6709\u9519\u8BEF\u4F1A\u6709\u8499\u5C42</span>
        <span class="token literal-property property">warnings</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">webSocketURL</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">hostname</span><span class="token operator">:</span> <span class="token string">&#39;0.0.0.0&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&#39;/ws&#39;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
        <span class="token literal-property property">protocol</span><span class="token operator">:</span> <span class="token string">&#39;ws&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">historyApiFallback</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u4F7F\u7528\u8DEF\u7531\u6A21\u5F0F\u4E3Ahistory\u65F6\uFF0C\u5FC5\u987B\u8BBE\u7F6E\u8FD9\u4E2A\uFF0C\u8981\u4E0D\u7136\u524D\u7AEF\u5237\u65B0\u4F1A\u76F4\u63A5404\u9875\u9762</span>
    <span class="token literal-property property">hot</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u6A21\u5757\u70ED\u52A0\u8F7D\uFF0C\u5BF9\u5E94\u6A21\u5757\u987B\u914D\u5408module.hot.accept(&#39;xxx/xxx.js&#39;)\u6307\u5B9A\u6A21\u5757\u70ED\u52A0\u8F7D</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5F53\u670D\u52A1\u542F\u52A8\u65F6\u9ED8\u8BA4\u81EA\u52A8\u76F4\u63A5\u6253\u5F00\u6D4F\u89C8\u5668\uFF0C\u53EF\u4EE5\u6307\u5B9A\u6253\u5F00\u54EA\u4E2A\u9875\u9762</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> proxy</h3><p><code>proxy</code> \u8FD9\u662F\u9879\u76EE\u4E2D\u63A5\u89E6\u6700\u591A\u4E00\u70B9\uFF0C\u4E5F\u662F\u521D\u5B66\u8005\u914D\u7F6E\u4EE3\u7406\u65F6\u5E38\u6700\u4EE4\u4EBA\u5934\u75BC\u7684\u4E8B\u60C5\uFF0C\u5B9E\u9645\u4E0A<code>proxy</code>\u672C\u8D28\u5C31\u662F\u5C06\u672C\u5730\u7684<code>\u63A5\u53E3\u8DEF\u7531\u524D\u7F00</code>\u4EE3\u7406\u5230\u76EE\u6807\u670D\u52A1\u5668\u73AF\u5883,\u53EF\u4EE5\u540C\u65F6\u4EE3\u7406\u591A\u4E2A\u4E0D\u540C\u73AF\u5883,\u5177\u4F53\u53C2\u8003\u4EE5\u4E0B</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">...</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u8C46\u74E3</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u738B\u8005\u8363\u8000\u5B98\u7F51</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5FC5\u987B\u8981\u52A0\uFF0C\u5426\u5219\u4EE3\u7406\u63A5\u53E3\u76F4\u63A5\u8FD4\u56DEhtml</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u4FEE\u6539<code>index.js</code></p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">$</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> appDomMovie <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;movie&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> gameDom <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&#39;wang&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// appDom.innerHTML = &#39;hello webpack for wds,&#39;;</span>
  <span class="token comment">// https://movie.douban.com/j/new_search_subjects?sort=U&amp;range=0,10&amp;tags=%E7%94%B5%E5%BD%B1&amp;start=0</span>
  <span class="token comment">// \u8C46\u74E3\u7535\u5F71</span>
  <span class="token keyword">const</span> <span class="token function-variable function">featchMovie</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/j/new_search_subjects?sort=U&amp;range=0,10&amp;tags=%E7%94%B5%E5%BD%B1&amp;start=0&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(data)</span>
    <span class="token keyword">const</span> divDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    data<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> rate <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
      str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string"> &lt;span&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>rate<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/span&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    divDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
    appDomMovie<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>divDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">featchMovie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">wangzherongyao</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> divDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// https://apps.game.qq.com/cmc/cross?serviceId=18&amp;filter=tag&amp;sortby=sIdxTime&amp;source=web_pc&amp;limit=20&amp;logic=or&amp;typeids=1%2C2&amp;exclusiveChannel=4&amp;exclusiveChannelSign=8a28b7e82d30142c1a986bb7acdcc068&amp;time=1655732988&amp;tagids=931</span>
    <span class="token comment">// \u738B\u8005\u8363\u8000\u5B98\u7F51</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span> items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token punctuation">(</span>
      <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>
        <span class="token string">&#39;/cmc/cross?serviceId=18&amp;filter=tag&amp;sortby=sIdxTime&amp;source=web_pc&amp;limit=20&amp;logic=or&amp;typeids=1%2C2&amp;exclusiveChannel=4&amp;exclusiveChannelSign=8a28b7e82d30142c1a986bb7acdcc068&amp;time=1655732988&amp;tagids=931&#39;</span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span><span class="token punctuation">;</span>
    items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> sTitle<span class="token punctuation">,</span> sIMG <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
      str <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">&lt;div&gt;
          &lt;img src=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>sIMG<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> /&gt;
          &lt;div&gt;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>sTitle<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
      &lt;/div&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    divDom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
    gameDom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>divDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token function">wangzherongyao</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://files.mdnice.com/user/24614/866fd77d-f174-45f2-a119-e8235b5aae70.png" alt=""> \u5BF9\u5E94\u7684\u4E24\u4E2A\u63A5\u53E3\u6570\u636E\u5C31\u5DF2\u7ECF\u5728\u9875\u9762\u4E0A\u6E32\u67D3\u51FA\u6765\u4E86</p><p>\u5BF9\u4E8E\u4EE3\u7406\u6211\u4EEC\u4F1A\u5E38\u5E38\u5BB9\u6613\u4F1A\u72AF\u4EE5\u4E0B<code>\u51E0\u4E2A\u8BEF\u533A</code></p><ul><li>\u7B2C\u4E00\u79CD, \u591A\u4E2A\u63A5\u53E3\u4EE3\u7406\uFF0C\u7B2C\u4E00\u4E2A\u76F4\u63A5\u4EE5<code>/</code>\u4EE3\u7406\uFF0C\u8FD9\u4F1A\u9020\u6210\u7B2C\u4E8C\u4E2A\u4EE3\u7406\u65E0\u6548\uFF0C\u63A5\u53E3\u76F4\u63A5 404\uFF0C\u4F18\u5148\u7EA7\u4F1A\u5148\u5339\u914D\u7B2C\u4E00\u4E2A</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
 <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u8C46\u74E3</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u738B\u8005\u8363\u8000\u5B98\u7F51</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5FC5\u987B\u8981\u52A0\uFF0C\u5426\u5219\u4EE3\u7406\u63A5\u53E3\u76F4\u63A5\u8FD4\u56DEhtml</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7B2C\u4E8C\u79CD\uFF0C<code>pathRewrite</code>\u8981\u4E0D\u8981\u52A0\uFF0C\u4EC0\u4E48\u65F6\u5019\u8BE5\u52A0\uFF0C\u4E0D\u77E5\u9053\u4F60\u53D1\u73B0\u6CA1\u6709\u6211\u7B2C\u4E00\u4E2A\u63A5\u53E3\u62E6\u622A\u5E76\u6CA1\u6709\u52A0<code>pathRewrite</code>\uFF0C\u4F46\u662F\u548C\u7B2C\u4E8C\u4E2A\u52A0\u4E86\u6548\u679C\u662F\u4E00\u6837\u7684\u3002</li></ul><p>\u73B0\u5728\u6709\u4E00\u4E2A\u573A\u666F\uFF0C\u5C31\u662F\u4F60\u672C\u5730\u6D4B\u8BD5\u670D\u52A1\u63A5\u53E3\u4E0E\u7EBF\u4E0A\u63A5\u53E3\u662F\u6709\u533A\u522B\u7684\uFF0C\u4E00\u822C\u4F60\u5728\u672C\u5730\u5F00\u53D1\u662F\u8054\u8C03\u73AF\u5883\uFF0C\u540E\u7AEF\u7684\u63A5\u53E3\u4E0D\u6309\u7167\u5E38\u7406\u51FA\u724C\uFF0C\u5047\u8BBE\u8054\u8C03\u73AF\u5883\u540E\u7AEF\u5C31\u662F\u6B7B\u6D3B\u4E0D\u540C\u610F\u7EDF\u4E00\u63A5\u53E3\u8DEF\u5F84\u600E\u4E48\u529E\uFF1F</p><p>\u73B0\u5728\u5047\u8BBE\u540E\u7AEF\u63A5\u53E3</p><p>\u8054\u8C03\u73AF\u5883:<code>/dev/api/cmc/cross</code></p><p>\u7EBF\u4E0A\u73AF\u5883\u662F<code>/api/cmc/cross</code></p><p>\u4E8E\u662F\u4F60\u60F3\u5230\u6709\u4EE5\u4E0B\u4E24\u79CD\u65B9\u6848\uFF1A</p><p>1\u3001\u5728 axios \u8BF7\u6C42\u62E6\u622A\u6839\u636E<code>\u73AF\u5883\u53D8\u91CF</code>\u624B\u52A8\u6DFB\u52A0\u524D\u7F00,\u4F46\u662F\u8FD9\u4E0D\u662F\u4E00\u79CD\u5F88\u597D\u7684\u65B9\u6848\uFF0C\u76F8\u5F53\u4E8E\u628A\u4E0D\u786E\u5B9A\u6027\u7684\u903B\u8F91\u4EE3\u7801\u6253\u5305\u5230\u7EBF\u4E0A\u53BB\u4E86\uFF0C\u6709\u4E00\u5B9A\u98CE\u9669</p><p>2\u3001\u4E0D\u7BA1\u5F00\u53D1\u73AF\u5883\u8FD8\u662F\u672C\u5730\u8054\u8C03\u73AF\u5883\u90FD\u662F\u7EDF\u4E00\u7684\u8DEF\u5F84\uFF0C\u4EC5\u4EC5\u53EA\u662F\u5728<code>proxy</code>\u7684<code>pathRewrite</code>\u505A\u5904\u7406\uFF0C\u8FD9\u6837\u98CE\u9669\u5F88\u5C0F\uFF0C\u4E0D\u5BB9\u6613\u9020\u6210\u7EBF\u4E0A\u63A5\u53E3 404 \u98CE\u9669</p><p>\u4E8E\u662F\u8FD9\u65F6\u5019<code>pathRewrite</code>\u7684\u4F5C\u7528\u5C31\u6765\u4E86,\u91CD\u5199\u8DEF\u5F84\uFF0C\u6CE8\u610F\u662F<code>pathRewrite: { &#39;^/cmc&#39;: &#39;/dev/cmc&#39; }</code></p><p>\u6211\u4EEC\u4EC5\u4EC5\u662F\u5728\u5F00\u53D1\u73AF\u5883\u91CD\u65B0\u4E86<code>/cmc</code>\u63A5\u53E3\u8DEF\u5F84\uFF0C\u5B9E\u9645\u4E0A\u4EE3\u7801\u73AF\u5883\u7684\u4EE3\u7801\u5E76\u4E0D\u4F1A\u6253\u5305\u5230\u7EBF\u4E0A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token punctuation">{</span>
 <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u8C46\u74E3</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u738B\u8005\u8363\u8000\u5B98\u7F51</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// \u5FC5\u987B\u8981\u52A0\uFF0C\u5426\u5219\u4EE3\u7406\u63A5\u53E3\u76F4\u63A5\u8FD4\u56DEhtml</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/dev/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7B2C\u4E09\u79CD\uFF0C\u7F3A\u5C11<code>changeOrigin:true</code>\uFF0C\u50CF\u4E0B\u9762\u8FD9\u79CD\u4E22\u5931\u4E86<code>changeOrigin</code>\u662F\u4E0D\u884C\u7684</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code> <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&#39;/j&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u8C46\u74E3</span>
        <span class="token comment">// changeOrigin: true,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/j&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/j&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token string-property property">&#39;/cmc&#39;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://apps.game.qq.com&#39;</span><span class="token punctuation">,</span> <span class="token comment">// \u4EE3\u7406\u738B\u8005\u8363\u8000\u5B98\u7F51</span>
        <span class="token comment">//changeOrigin: true,</span>
        <span class="token literal-property property">pathRewrite</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token string-property property">&#39;^/cmc&#39;</span><span class="token operator">:</span> <span class="token string">&#39;/dev/cmc&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u9047\u5230\u6709\u591A\u4E2A\u8DEF\u7531\u6307\u5411\u7684\u662F\u540C\u4E00\u4E2A\u670D\u52A1\u5668\u600E\u4E48\u529E\uFF0C\u522B\u6025\uFF0C\u5B98\u7F51\u6709\u65B9\u6848\uFF0C\u4F60\u53EF\u4EE5\u8FD9\u4E48\u505A</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">devServer</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/j&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/cmc&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&#39;https://movie.douban.com&#39;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,25),G=s("\u9879\u76EE\u5E38\u7528\u7684\u5C31\u662F\u4EE5\u4E0A\u8FD9\u4E9B\u4E86\uFF0C\u53E6\u5916\u62D3\u5C55\u7684\uFF0C\u6BD4\u5982\u53EF\u4EE5\u652F\u6301\u672C\u5730"),X=n("code",null,"https",-1),Y=s("\uFF0C\u56E0\u4E3A\u9ED8\u8BA4\u672C\u5730\u662F"),J=n("code",null,"http",-1),K=s(",\u8FD8\u6709\u652F\u6301\u5F53\u524D\u53EF\u4EE5\u5F00\u542F\u4E00\u4E2A"),Q=n("code",null,"websocket",-1),Z=s("\u670D\u52A1\uFF0C\u66F4\u591A\u914D\u7F6E\u53C2\u8003\u5B98\u7F51\uFF0C\u6216\u8005\u6709\u66F4\u591A\u7279\u522B\u7684\u9700\u6C42\uFF0C\u53CA\u65F6\u7FFB\u9605"),nn={href:"https://webpack.docschina.org/configuration/dev-server/",title:"\u5B98\u7F51",target:"_blank",rel:"noopener noreferrer"},sn=s("\u5B98\u7F51"),an=a('<h3 id="wds-\u6A21\u5757\u70ED\u52A0\u8F7D\u539F\u7406-hmr" tabindex="-1"><a class="header-anchor" href="#wds-\u6A21\u5757\u70ED\u52A0\u8F7D\u539F\u7406-hmr" aria-hidden="true">#</a> WDS \u6A21\u5757\u70ED\u52A0\u8F7D\u539F\u7406(HMR)</h3><p>\u53EA\u66F4\u65B0\u9875\u9762\u6A21\u5757\u53D8\u5316\u7684\u5185\u5BB9\uFF0C\u65E0\u9700\u5168\u7AD9\u5237\u65B0</p><p>\u672C\u8D28\u4E0A\u5C31\u662F<code>webpack-dev-server</code>\u4E2D\u7684\u4E24\u4E2A\u670D\u52A1\uFF0C\u4E00\u4E2A<code>express</code>\u63D0\u4F9B\u7684\u9759\u6001\u670D\u52A1\uFF0C\u901A\u8FC7<code>webpack</code>\u53BB<code>compiler</code>\u5165\u53E3\u7684\u4F9D\u8D56\u6587\u4EF6\uFF0C\u52A0\u8F7D\u6253\u5305\u5185\u5B58\u4E2D\u7684<code>bundle.js</code></p>',3),pn=a("\u7B2C\u4E8C\u4E2A\u6A21\u5757\u70ED\u52A0\u8F7D\u662F\u4E00\u4E2A<code>websocket</code>\u670D\u52A1\uFF0C\u901A\u8FC7<code>socketio</code>,\u5F53\u6E90\u7801\u9759\u6001\u6587\u4EF6\u53D1\u751F\u53D8\u5316\u65F6\uFF0C\u6B64\u65F6\u4F1A\u751F\u6210\u4E00\u4E2A<code>manifest</code>\u6587\u4EF6\uFF0C\u8FD9\u4E2A\u6587\u4EF6\u4F1A\u8BB0\u5F55\u4E00\u4E2A<code>hash</code>\u4EE5\u53CA\u5BF9\u5E94\u6587\u4EF6\u4FEE\u6539\u7684<code>chunk.js</code>,\u5F53\u6587\u4EF6\u4FEE\u6539\u65F6<code>websocket</code>\u4F1A\u5355\u72EC\u5411\u6D4F\u89C8\u5668\u53D1\u9001\u4E00\u4E2A<code>ws</code>\u670D\u52A1\uFF0C\u4ECE\u800C\u66F4\u65B0\u9875\u9762\u90E8\u5206\u6A21\u5757\uFF0C\u66F4\u591A\u53EF\u4EE5\u53C2\u8003\u5B98\u7F51",15),tn={href:"https://webpack.docschina.org/concepts/hot-module-replacement/",title:"hot-module-replacement",target:"_blank",rel:"noopener noreferrer"},en=s("hot-module-replacement"),on=a('<h3 id="\u603B\u7ED3" tabindex="-1"><a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a> \u603B\u7ED3</h3><ul><li><p>\u4E86\u89E3<code>webpack-dev-server</code>\u662F\u4EC0\u4E48\uFF0C\u5B83\u662F\u4E00\u4E2A\u5F00\u53D1\u73AF\u5883\u7684\u9759\u6001\u670D\u52A1</p></li><li><p><code>webpack-dev-server</code>\u5728 webpack \u4E2D\u7684\u4F7F\u7528</p></li><li><p>\u5173\u4E8E<code>WDS</code>\u4E00\u4E9B\u5E38\u7528\u7684\u914D\u7F6E\uFF0C\u6BD4\u5982\u5982\u4F55\u914D\u7F6E\u63A5\u53E3\u4EE3\u7406\u7B49</p></li><li><p>\u6D45\u8BC6<code>HMR</code>\u6A21\u5757\u70ED\u52A0\u8F7D\uFF0C\u539F\u751F<code>webpack</code>\u867D\u7136\u4E5F\u63D0\u4F9B\u4E86\u6A21\u5757\u70ED\u52A0\u8F7D\uFF0C\u4F46\u662F<code>webpack-dev-server</code>\u53EF\u4EE5\u5B9E\u73B0\u6A21\u5757\u70ED\u52A0\u8F7D\uFF0C\u5E38\u7528\u6846\u67B6\uFF0C\u6BD4\u5982<code>vue</code>\uFF0C\u5185\u90E8\u70ED\u52A0\u8F7D\u662F\u7528<code>vue-loader</code>\u5B9E\u73B0\u7684\uFF0C\u5728\u4F7F\u7528<code>WDS</code>\u65F6\uFF0C\u9ED8\u8BA4\u662F\u5F00\u542F\u4E86\u70ED\u52A0\u8F7D\u7684\u3002</p></li></ul>',2);function cn(ln,rn){const p=l("ExternalLinkIcon");return o(),c("div",null,[r,n("p",null,[u,n("a",d,[k,t(p)])]),v,n("p",null,[m,b,g,y,h,n("a",w,[_,t(p)])]),f,n("p",null,[q,n("a",j,[x,t(p)])]),E,n("p",null,[D,S,O,I,N,R,C,n("a",M,[T,t(p)]),B]),P,n("ul",null,[V,n("li",null,[L,W,A,$,n("a",H,[U,t(p)])]),z]),F,n("p",null,[G,X,Y,J,K,Q,Z,n("a",nn,[sn,t(p)])]),an,n("p",null,[pn,n("a",tn,[en,t(p)])]),on])}var dn=e(i,[["render",cn],["__file","2022-06-21.html.vue"]]);export{dn as default};
