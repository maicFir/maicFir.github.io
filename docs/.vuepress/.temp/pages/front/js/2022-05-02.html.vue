<template><div><blockquote>
<p>è·¨åŸŸäº§ç”Ÿçš„åŸå› é¦–å…ˆæ˜¯å—æµè§ˆå™¨çš„å®‰å…¨æ€§è®¾è®¡å½±å“ï¼Œç”±äºæµè§ˆå™¨åŒæºç­–ç•¥çš„è®¾è®¡ï¼Œæ‰€ä»¥äº§ç”Ÿäº†è·¨åŸŸã€‚</p>
</blockquote>
<p>åœ¨é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é‡åˆ°è·¨åŸŸçš„é—®é¢˜ï¼Œè™½ç„¶åœ¨ä½ çš„é¡¹ç›®é‡Œï¼Œè„šæ‰‹æ¶å·²ç» 100%åšå¥½äº†æœ¬åœ°ä»£ç†ã€æˆ–è€…è¿ç»´è€é“åœ¨<code v-pre>nginx</code>ä¸­ä¹Ÿå·²ç»ç»™ä½ åšäº†æ¥å£ä»£ç†ï¼Œæ‰€ä»¥ä½ é‡åˆ°è·¨åŸŸçš„æ¦‚ç‡ä¼šå°‘äº†å¾ˆå¤šï¼Œä½†æ˜¯åœ¨ä¼ ç»Ÿçš„é¡¹ç›®ä¸­ï¼Œåœ¨é‚£ä¸ª<code v-pre>jquery</code>çš„æ¨ªè¡Œæ—¶ä»£ï¼Œæˆ–è€…ä½ æ¥æ‰‹äº†ä¸€ä¸ªç¥–ä¼ é¡¹ç›®æ—¶ï¼Œè·¨åŸŸé—®é¢˜ä¼šæ˜¯æ—¶æœ‰å‘ç”Ÿï¼Œæœ¬æ–‡åªåšç¬”è€…äº†è§£è·¨åŸŸçš„é€šç”¨è§£å†³æ–¹æ¡ˆï¼Œå¸Œæœ›åœ¨å®é™…é¡¹ç›®ä¸­å¯¹ä½ æœ‰äº›æ€è€ƒå’Œå¸®åŠ©ã€‚</p>
<p>æ­£æ–‡å¼€å§‹...</p>
<h3 id="ä½•ä¸ºåŒæº" tabindex="-1"><a class="header-anchor" href="#ä½•ä¸ºåŒæº" aria-hidden="true">#</a> ä½•ä¸ºåŒæº</h3>
<ul>
<li>åè®®ç›¸åŒ</li>
<li>åŸŸåç›¸åŒ</li>
<li>ç«¯å£ç›¸åŒ</li>
</ul>
<p>éåŒæºæ˜¯æ— æ³•å½¼æ­¤è®¿é—®<code v-pre>cookie</code>,<code v-pre>domæ“ä½œ</code>ï¼Œ<code v-pre>ajax</code>ã€<code v-pre>localStorage</code>ã€<code v-pre>indexDB</code>æ“ä½œ</p>
<p>ä½†æ˜¯éåŒæºå¯ä»¥è®¿é—®ä»¥ä¸‹ä¸€äº›å±æ€§</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span>location
window<span class="token punctuation">.</span>frames
window<span class="token punctuation">.</span>parent
<span class="token operator">...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹äºéåŒæºç½‘ç«™è·¨åŸŸé€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨ä»¥ä¸‹å‡ ç§æ–¹æ¡ˆ</p>
<h3 id="ç‰‡æ®µæ ‡è¯†ç¬¦" tabindex="-1"><a class="header-anchor" href="#ç‰‡æ®µæ ‡è¯†ç¬¦" aria-hidden="true">#</a> ç‰‡æ®µæ ‡è¯†ç¬¦</h3>
<p>é€šè¿‡åœ¨<code v-pre>url</code>ä¸Šæ”¾å…¥<code v-pre>#type</code>ï¼Œåˆ©ç”¨<code v-pre>hashchange</code>äº‹ä»¶ï¼Œè·å–çˆ¶é¡µé¢çš„ç›¸å…³<code v-pre>hash</code>æ•°æ®</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// parent</span>
<span class="token keyword">const</span> type <span class="token operator">=</span> <span class="token string">'list'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> originUrl <span class="token operator">=</span> originUrl <span class="token operator">+</span> <span class="token string">'#'</span> <span class="token operator">+</span> type<span class="token punctuation">;</span>
<span class="token keyword">const</span> iframe <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'iframe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
iframe<span class="token punctuation">.</span>src <span class="token operator">=</span> originUrl<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨å­<code v-pre>iframe</code>ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›‘å¬<code v-pre>hashchange</code>äº‹ä»¶</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// iframe</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>evt<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·å–ç‰‡æ®µæ ‡è¯†ç¬¦çš„ç›¸å…³æ•°æ®</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="è·¨æ–‡æ¡£é€šä¿¡-window-postmessage" tabindex="-1"><a class="header-anchor" href="#è·¨æ–‡æ¡£é€šä¿¡-window-postmessage" aria-hidden="true">#</a> è·¨æ–‡æ¡£é€šä¿¡ window.postMessage</h3>
<p>å­é¡µé¢å¯ä»¥åˆ©ç”¨<code v-pre>window.postMessage</code>å‘çˆ¶é¡µé¢å‘é€ä¿¡æ¯ï¼Œçˆ¶é¡µé¢ç›‘å¬<code v-pre>message</code>æ¥æ”¶å­é¡µé¢å‘é€çš„æ¶ˆæ¯ï¼Œé€šå¸¸è¿™ç§æ–¹å¼åœ¨<code v-pre>iframe</code>é€šä¿¡ä¸­ç”¨å¾—åšå¤šï¼Œä¹Ÿæ˜¯è·¨åŸŸé€šä¿¡çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// parent</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">evt</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> evt<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// child</span>
<span class="token keyword">const</span> origin <span class="token operator">=</span> <span class="token string">'*'</span><span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œä¸€èˆ¬æ˜¯çˆ¶é¡µé¢çš„åŸŸåï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ˜¯*</span>
<span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'hello, world'</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="jsonp" tabindex="-1"><a class="header-anchor" href="#jsonp" aria-hidden="true">#</a> jsonp</h3>
<p>åˆ©ç”¨<code v-pre>script</code>æ ‡ç­¾ï¼Œå‘æœåŠ¡ç«¯å‘é€ä¸€ä¸ª<code v-pre>get</code>è¯·æ±‚ï¼Œ<code v-pre>url</code>ä¸Šç»‘å®šä¸€ä¸ª<code v-pre>callback=fn</code>,è¿™ä¸ª<code v-pre>fn</code>é€šå¸¸æ˜¯ä¸åç«¯çº¦æŸå¥½ï¼Œ<code v-pre>fn</code>æ˜¯å®¢æˆ·ç«¯æ‰§è¡Œçš„å‡½æ•°åã€‚</p>
<p>ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è§£é‡Šä¸‹<code v-pre>jsonp</code></p>
<p>å®¢æˆ·ç«¯ç¤ºä¾‹</p>
<div class="language-html ext-html line-numbers-mode"><pre v-pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>jsonp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>jsonp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      script<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'text/javascript'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      script<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'http://192.168.31.40:8080/api?callback=jsonp'</span><span class="token punctuation">;</span>
      document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> <span class="token function-variable function">renderHtml</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">,</span> dom</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        dom<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;div>æˆ‘çš„åå­— </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,ä»Šå¹´ </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>age<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">å²äº†&lt;/div></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
      <span class="token keyword">function</span> <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> app <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'app'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">;</span>
        <span class="token function">renderHtml</span><span class="token punctuation">(</span><span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span><span class="token punctuation">,</span> app<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç«¯ç¤ºä¾‹ä»£ç </p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token comment">// server.js</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token string">'8080'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token comment">// console.log(req.url);</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'text/html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">'../'</span><span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'404'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'Maic'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/api'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">jsonp(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is start'</span> <span class="token operator">+</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„æˆ‘ä»¬çœ‹åˆ°æœ‰è¿™æ ·çš„ä¸€æ®µåˆ¤æ–­<code v-pre>req.url.includes('/api')</code>,ç„¶åæˆ‘ä»¬<code v-pre>res.end(</code>jsonp(JSON.stringify(data))<code v-pre>)</code>,è¿”å›çš„å°±æ˜¯<code v-pre>jsonp</code>è¿™ä¸ªå›è°ƒå‡½æ•°ï¼ŒæŠŠæ•°æ®å½“å½¢å‚ä¼ ç»™å‰ç«¯ï¼Œåœ¨å®¢æˆ·ç«¯å®šä¹‰çš„<code v-pre>jsonp</code>æ–¹æ³•å°±èƒ½è·å–å¯¹åº”çš„æ•°æ®ã€‚</p>
<p>æ‰§è¡Œ<code v-pre>node server.js</code>æ‰“å¼€<code v-pre>http://localhost:8080</code>æˆ‘ä»¬ä¼šå‘ç°</p>
<p><img src="https://files.mdnice.com/user/24614/24f7a796-d3d9-44e4-9b7e-a8b12ad596c6.png" alt="">
è¿”å›çš„æ•°æ®å°±æ˜¯<code v-pre>fn({name: 'xx',age: 'xx'})</code></p>
<p>æˆ‘ä»¬çœ‹ä¸‹è¯·æ±‚å¤´
<img src="https://files.mdnice.com/user/24614/a5a33dde-c0d6-4942-84e2-6eae43aae25e.png" alt="">
æµè§ˆå™¨ä¼šå‘é€ä¸€ä¸ª<code v-pre>get</code>è¯·æ±‚ï¼Œæ‰€æºå¸¦çš„å‚æ•°å°±æ˜¯<code v-pre>callback: jsonp</code>,è€Œæˆ‘ä»¬åœ¨å®¢æˆ·ç«¯ç¡®å®æ˜¯é€šè¿‡<code v-pre>jsonp</code>è¿™ä¸ªæ–¹æ³•æ‹¿åˆ°å¯¹åº”çš„æ•°æ®äº†ã€‚</p>
<p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥çŸ¥é“<code v-pre>jsonp</code>å®é™…ä¸Šå°±æ˜¯åˆ©ç”¨ä¸€ä¸ªå®¢æˆ·ç«¯å‘é€çš„<code v-pre>get</code>è¯·æ±‚æºå¸¦ä¸€ä¸ªåç«¯æœåŠ¡çš„è¿”å›çš„<code v-pre>å›è°ƒå‡½æ•°</code>,åœ¨å®¢æˆ·ç«¯ï¼Œæˆ‘ä»¬å®šä¹‰è¿™ä¸ª<code v-pre>å›è°ƒå‡½æ•°</code>å°±å¯ä»¥è·å–åç«¯è¿”å›çš„å½¢å‚æ•°æ®äº†ã€‚</p>
<p>ä»<code v-pre>jsonp</code>è¿™ç§è·¨åŸŸé€šä¿¡æ¥çœ‹ï¼Œå…¶å®æœ‰ä¹Ÿå®ƒçš„ç¼ºç‚¹å’Œä¼˜ç‚¹</p>
<ul>
<li>ç¼ºç‚¹</li>
</ul>
<p>1ã€å®ƒçš„å®‰å…¨æ€§ä¼šæœ‰ä¸€å®šé£é™©ï¼Œå› ä¸ºä¾èµ–çš„ç»“æœå°±æ˜¯é‚£ä¸ªå›è°ƒå‡½æ•°çš„å½¢å‚å†…å®¹ï¼Œå¦‚æœè¢«äººåŠ«æŒä¿®æ”¹è¿”å›æ•°æ®ï¼Œé‚£å¯èƒ½ä¼šé€ æˆå®‰å…¨æ€§é—®é¢˜</p>
<p>2ã€ä»…æ”¯æŒ<code v-pre>get</code>è¯·æ±‚ï¼Œä¸æ”¯æŒå…¶å®ƒ<code v-pre>http</code>è¯·æ±‚æ–¹å¼ï¼Œæˆ‘ä»¬å‘ç°<code v-pre>jsonp</code>è¿™ç§é€šä¿¡å°±æ˜¯åˆ©ç”¨<code v-pre>script</code>æ ‡ç­¾è¯·æ±‚äº†ä¸€ä¸ª<code v-pre>url</code>,<code v-pre>url</code>ä¸Šæºå¸¦äº†ä¸€ä¸ªå¯æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œè¿›è€Œé€šè¿‡åç«¯ç»™å›è°ƒå‡½æ•°ä¼ é€’æ•°æ®çš„ã€‚</p>
<p>3ã€æ²¡æœ‰ä»»ä½•çŠ¶æ€ç ï¼Œæ•°æ®ä¸¢ç»™å®¢æˆ·ç«¯ï¼Œå¦‚æœæœ‰å¤±è´¥æƒ…å†µï¼Œä¸ä¼šæœ‰åƒ<code v-pre>http</code>çŠ¶æ€ç ä¸€æ ·</p>
<ul>
<li>ä¼˜ç‚¹</li>
</ul>
<p>èƒ½è§£å†³è·¨åŸŸé€šä¿¡é—®é¢˜ï¼Œå…¼å®¹æ€§æ¯”è¾ƒå¥½ï¼Œä¸å—åŒæºç­–ç•¥çš„å½±å“ï¼Œå¯¹åç«¯æ¥è¯´å®ç°ä¹Ÿç®€å•ã€‚</p>
<p>åœ¨ä»¥å‰æ¯”è¾ƒä¹…è¿œçš„é¡¹ç›®ä¸­ï¼Œä½ å¯èƒ½æ˜¯ç›´æ¥ä½¿ç”¨<code v-pre>jquery</code>ï¼Œ<code v-pre>jsonp</code>å°±<code v-pre>ok</code>äº†,å¤§æ¦‚çš„ä»£ç å°±æ˜¯é•¿è¿™æ ·çš„</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'jsonp'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">jsonp</span><span class="token operator">:</span> <span class="token string">'successCallback'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">error</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>successCallback</code>è¿™ä¸ªå°±æ˜¯ä¸æœåŠ¡ç«¯çº¦æŸçš„å›è°ƒå‡½æ•°ï¼Œä¸€èˆ¬ä¸æœåŠ¡ç«¯æ²Ÿé€šä¸€è‡´å°±è¡Œï¼Œé‚£ä¹ˆç®€å•çš„<code v-pre>jsonp</code>å°±å·²ç»å®Œæˆäº†,æ˜¯ä¸æ˜¯æ„Ÿè§‰å¾ˆç®€å•å‘¢ï¼Ÿ</p>
<h3 id="websocket" tabindex="-1"><a class="header-anchor" href="#websocket" aria-hidden="true">#</a> WebSocket</h3>
<p>ç”±äº<code v-pre>WebSocket</code>ä¸å—åŒæºç­–ç•¥çš„é™åˆ¶ï¼Œå› æ­¤<code v-pre>WebSocket</code>ä¹Ÿæ˜¯å¯ä»¥å®ç°è·¨åŸŸé€šä¿¡çš„ã€‚è¿™é‡Œå°±ä¸ä¸¾ä¾‹å­äº†ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¹‹å‰å†™çš„ä¸€ç¯‡<a href="https://mp.weixin.qq.com/s?__biz=Mzk0ODMxODIzNw==&amp;mid=2247487539&amp;idx=1&amp;sn=7336057d6c0675846229c07497acf840&amp;chksm=c3682941f41fa057e984ac8eb034b5d9c0bb1c75c79b5f895952fc535c25eb92f08a36e74bab&amp;=897076076&amp;=zh_CN#rd" target="_blank" rel="noopener noreferrer">æµ…è°ˆ websocket<ExternalLinkIcon/></a>è¿™ç¯‡æ–‡ç« </p>
<h3 id="cors-è·¨åŸŸèµ„æºåˆ†äº«" tabindex="-1"><a class="header-anchor" href="#cors-è·¨åŸŸèµ„æºåˆ†äº«" aria-hidden="true">#</a> CORS è·¨åŸŸèµ„æºåˆ†äº«</h3>
<p>è¿™ç§æ–¹å¼æ˜¯åœ¨æœåŠ¡ç«¯è¿›è¡Œæ§åˆ¶ï¼Œå…è®¸ä»»ä½•èµ„æºè¯·æ±‚ã€‚å…¶å®åœ¨æµè§ˆå™¨ç«¯ï¼Œå³ä½¿è·¨åŸŸï¼Œè¿˜æ˜¯ä¼šæ­£å¸¸è¯·æ±‚ï¼Œåªæ˜¯è¯·æ±‚éåŒæºç¯å¢ƒçš„åç«¯æœåŠ¡ï¼Œæµè§ˆå™¨ç¦æ­¢è¯·æ±‚è®¿é—®,æ›´å¤šå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« <a href="https://www.wangdoc.com/javascript/bom/cors.html" title="cors" target="_blank" rel="noopener noreferrer">cors<ExternalLinkIcon/></a></p>
<p>æˆ‘ä»¬å†™ä¸ªä¾‹å­å…·ä½“æµ‹è¯•ä¸€ä¸‹,åœ¨å®¢æˆ·ç«¯åŠ å…¥è¿™æ®µä»£ç </p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> send <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'send'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
send<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>window<span class="token punctuation">.</span>fetch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'http://localhost:8081/list.json'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> contentDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">renderHtml</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> contentDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç«¯ä»£ç ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code v-pre>index2.js</code>æœåŠ¡ç«¯ä»£ç ,å¹¶æ‰§è¡Œ<code v-pre>node index2.js</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token string">'8081'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token comment">// // console.log(req.url);</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/list.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>
      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'maic'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is start'</span> <span class="token operator">+</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ³¨æ„åˆ°è¯·æ±‚çš„ç«¯å£æ˜¯<code v-pre>8081</code>,æ‰“å¼€<code v-pre>8080</code>é¡µé¢</p>
<p><img src="https://files.mdnice.com/user/24614/5aed984e-7a20-48d7-9c14-b4f3e80556ba.png" alt="">
ç‚¹å‡»æŒ‰é’®ï¼Œå‘é€<code v-pre>fetch</code>è¯·æ±‚ï¼Œæˆ‘ä»¬å‘ç°æµè§ˆå™¨æŠ¥äº†è¿™æ ·ä½ å¸¸å¸¸çœ‹åˆ°çš„è·¨åŸŸä¿¡æ¯<code v-pre>as been blocked by CORS policy: No 'Access-Control-Allow-Origin' header...</code>,å› ä¸ºè·¨åŸŸäº†</p>
<p>ç´§æ¥ç€æˆ‘ä»¬åœ¨æœåŠ¡ç«¯è®¾ç½®ä¸‹<code v-pre>Access-Control-Allow-Origin: *</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token string">'8081'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span>
  <span class="token comment">// // console.log(req.url);</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'/list.json'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>
      <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'maic'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">age</span><span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server is start'</span> <span class="token operator">+</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ­¤æ—¶å†æ¬¡è®¿é—®æ—¶ï¼Œå·²ç» ok äº†
<img src="https://files.mdnice.com/user/24614/f712a4e4-7182-48f9-9772-44ff847eee9c.png" alt="">
<img src="https://files.mdnice.com/user/24614/995393eb-0b34-4a7f-bd71-bbeff0c41c57.png" alt="">
æ³¨æ„æˆ‘ä»¬å¯ä»¥çœ‹ä¸‹<code v-pre>Response Headers</code></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="language-javascript"><code><span class="token constant">HTTP</span><span class="token operator">/</span><span class="token number">1.1</span> <span class="token number">200</span> <span class="token constant">OK</span>
Content<span class="token operator">-</span>Type<span class="token operator">:</span> application<span class="token operator">/</span>json
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin<span class="token operator">:</span> <span class="token operator">*</span>
<span class="token literal-property property">Date</span><span class="token operator">:</span> Sun<span class="token punctuation">,</span> <span class="token number">01</span> May <span class="token number">2022</span> <span class="token number">14</span><span class="token operator">:</span><span class="token number">23</span><span class="token operator">:</span><span class="token number">59</span> <span class="token constant">GMT</span>
<span class="token literal-property property">Connection</span><span class="token operator">:</span> keep<span class="token operator">-</span>alive
Content<span class="token operator">-</span>Length<span class="token operator">:</span> <span class="token number">24</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code v-pre>Access-Control-Allow-Origin:*</code>è¿™æ˜¯æˆ‘ä»¬æœåŠ¡çš„è®¾ç½®å“åº”è¯·æ±‚å¤´ï¼Œè®¾ç½®å…è®¸æ‰€æœ‰åŸŸåè¯·æ±‚ã€‚</p>
<p>å› æ­¤<code v-pre>cors</code>è·¨åŸŸå…¶å®åœ¨æœåŠ¡ç«¯è®¾ç½®<code v-pre>Access-Control-Allow-Originï¼š *</code>ä¹Ÿå°±å®Œç¾çš„è§£å†³äº†è·¨åŸŸé—®é¢˜ã€‚</p>
<h3 id="æ€»ç»“" tabindex="-1"><a class="header-anchor" href="#æ€»ç»“" aria-hidden="true">#</a> æ€»ç»“</h3>
<ul>
<li>
<p>è·¨åŸŸäº§ç”Ÿçš„åŸå› ï¼Œä¸»è¦å—åŒæºç­–ç•¥çš„å½±å“ï¼ŒéåŒæºç¯å¢ƒï¼Œæ— æ³•ç›¸äº’è®¿é—®<code v-pre>cookie</code>ã€<code v-pre>localStorage</code>ã€<code v-pre>domæ“ä½œ</code>ç­‰</p>
</li>
<li>
<p>è§£å†³è·¨åŸŸçš„æ–¹æ¡ˆä¸»è¦æœ‰<code v-pre>ç‰‡æ®µæ ‡è¯†ç¬¦</code>ã€<code v-pre>iframeé€šä¿¡postMessage</code>,<code v-pre>jsonp</code>ã€<code v-pre>WebSocket</code>ã€<code v-pre>cors</code></p>
</li>
<li>
<p>ç”¨å…·ä½“å®é™…ä¾‹å­æ·±å…¥äº†è§£å‡ ç§è·¨åŸŸæ¨¡å¼ï¼Œæ¯”å¦‚<code v-pre>jsonp</code>,å®é™…ä¸Šæ˜¯åˆ©ç”¨<code v-pre>script</code>å‘é€ä¸€ä¸ª<code v-pre>get</code>è¯·æ±‚ï¼Œåœ¨<code v-pre>get</code>è¯·æ±‚çš„å‚æ•°ä¸­ä¼ å…¥ä¸€ä¸ªå¯æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼ŒæœåŠ¡æ ¹æ®è¯·æ±‚ï¼Œå°†è¿”å›ä¸€ä¸ªå‰ç«¯å¯æ‰§è¡Œçš„å›è°ƒå‡½æ•°ï¼Œå¹¶ä¸”å°†æ•°æ®å½“æˆè¯¥å›è°ƒå‡½æ•°çš„å½¢å‚ï¼Œåœ¨å‰ç«¯å®šä¹‰è¯¥å›è°ƒå‡½æ•°ï¼Œä»è€Œè·å–è°ƒå‡½æ•°ä¼ å…¥çš„æ•°æ®ã€‚</p>
</li>
<li>
<p>ç”¨å…·ä½“ ğŸŒ° çœ‹åˆ°æœåŠ¡ç«¯è®¾ç½®<code v-pre>cors</code>,ä¸»è¦æ˜¯åœ¨åç«¯æ¥å£è¿”å›å“åº”å¤´é‡Œè®¾ç½®<code v-pre>Access-Control-Allow-Origin:*</code>å…è®¸æ‰€æœ‰ä¸åŒæºç½‘ç«™è®¿é—®ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿæ˜¯æ¯”è¾ƒç²—æš´çš„è§£å†³è·¨åŸŸé—®é¢˜ã€‚</p>
</li>
<li>
<p>æœ¬æ–‡ç¤ºä¾‹ä»£ç <a href="https://github.com/maicFir/lessonNote/tree/master/node/jsonp" title="code example" target="_blank" rel="noopener noreferrer">code example<ExternalLinkIcon/></a></p>
</li>
</ul>
</div></template>
